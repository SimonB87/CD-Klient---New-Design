<?xml version="1.0" encoding="utf-8"?>
<?data-format version="0.400"?>
<Form>
  <Name value="PL" />
  <Caption value="Detail schváleného místa" />
  <Content>
    <Panel>
      <Name value="pnlMain" />
      <Orientation value="Vertical" />
      <Panel.Height value="#" />
      <Panel.Width value="*" />
      <Children>
        <Panel>
          <Name value="pnl_actionBtns" />
          <Orientation value="Horizontal" />
          <Panel.Height value="#" />
          <Panel.Width value="*" />
          <Children>
            <Panel>
              <Name value="pnl_actionBtns_left_parent" />
              <Orientation value="Vertical" />
              <Panel.Height value="#" />
              <Panel.Width value="*" />
              <Children>
                <Panel>
                  <Name value="pnl_actionBtns_left" />
                  <Orientation value="Horizontal" />
                  <Panel.Height value="#" />
                  <Panel.Width value="*" />
                  <Children>
                    <Button>
                      <Name value="btnModify" />
                      <Caption value="Modifikovat" />
                      <Panel.Height value="#" />
                      <Panel.Width value="*" />
                      <OnClick>
                        <ActionEvent ReferencedAction="~handler_btnModify_OnClick" />
                      </OnClick>
                      <Bindings>
                        <Binding SourceProperty="IsVisible" Expression="ui.buttons.btnModify.IsVisible" />
                        <Binding SourceProperty="IsEnabled" Expression="ui.buttons.btnModify.IsEnabled" />
                      </Bindings>
                      <CssClass>
                        <CssClassConditional>
                          <ClassName value="{theme}-button" />
                          <IsThemedStyle value="True" />
                        </CssClassConditional>
                        <CssClassConditional>
                          <ClassName value="cd-header-button" />
                        </CssClassConditional>
                      </CssClass>
                    </Button>
                    <Button>
                      <Name value="btnDelete" />
                      <Caption value="Zrušit" />
                      <Panel.Height value="#" />
                      <Panel.Width value="*" />
                      <OnClick>
                        <ActionEvent ReferencedAction="~handler_btnDelete_OnClick" />
                      </OnClick>
                      <Bindings>
                        <Binding SourceProperty="IsVisible" Expression="ui.buttons.btnDelete.IsVisible" />
                        <Binding SourceProperty="IsEnabled" Expression="ui.buttons.btnDelete.IsEnabled" />
                      </Bindings>
                      <CssClass>
                        <CssClassConditional>
                          <ClassName value="{theme}-button" />
                          <IsThemedStyle value="True" />
                        </CssClassConditional>
                        <CssClassConditional>
                          <ClassName value="cd-header-button" />
                        </CssClassConditional>
                      </CssClass>
                    </Button>
                    <Button>
                      <Name value="btnActionConfirm" />
                      <Panel.Height value="#" />
                      <Panel.Width value="*" />
                      <OnClick>
                        <ActionEvent ReferencedAction="~handler_btnActionConfirm_OnClick" />
                      </OnClick>
                      <Bindings>
                        <Binding SourceProperty="IsEnabled" Expression="ui.buttons.btnActionConfirm.IsEnabled" />
                        <Binding SourceProperty="IsVisible" Expression="ui.buttons.btnActionConfirm.IsVisible" />
                        <Binding SourceProperty="Caption" Expression="ui.buttons.btnActionConfirm.Caption" />
                      </Bindings>
                      <CssClass>
                        <CssClassConditional>
                          <ClassName value="{theme}-button" />
                          <IsThemedStyle value="True" />
                        </CssClassConditional>
                        <CssClassConditional>
                          <ClassName value="cd-header-button" />
                        </CssClassConditional>
                        <CssClassConditional>
                          <ClassName value="btn-alternate" />
                        </CssClassConditional>
                      </CssClass>
                    </Button>
                    <Button>
                      <Name value="btnActionCancel" />
                      <Caption value="Storno" />
                      <Panel.Height value="#" />
                      <Panel.Width value="*" />
                      <OnClick>
                        <ActionEvent ReferencedAction="~handler_buttonActionCancel_OnClick" />
                      </OnClick>
                      <Bindings>
                        <Binding SourceProperty="IsEnabled" Expression="ui.buttons.btnActionCancel.IsEnabled" />
                        <Binding SourceProperty="IsVisible" Expression="ui.buttons.btnActionCancel.IsVisible" />
                      </Bindings>
                      <CssClass>
                        <CssClassConditional>
                          <ClassName value="{theme}-button" />
                          <IsThemedStyle value="True" />
                        </CssClassConditional>
                        <CssClassConditional>
                          <ClassName value="cd-header-button" />
                        </CssClassConditional>
                      </CssClass>
                    </Button>
                    <Button>
                      <Name value="btnActionValidation" />
                      <Caption value="Validace" />
                      <Panel.Height value="#" />
                      <Panel.Width value="*" />
                      <OnClick>
                        <ActionEvent ReferencedAction="~handler_btnActionValidation_OnClick" />
                      </OnClick>
                      <Bindings>
                        <Binding SourceProperty="IsVisible" Expression="ui.buttons.btnActionValidation.IsVisible" />
                        <Binding SourceProperty="IsEnabled" Expression="ui.buttons.btnActionValidation.IsEnabled" />
                      </Bindings>
                      <CssClass>
                        <CssClassConditional>
                          <ClassName value="{theme}-button" />
                          <IsThemedStyle value="True" />
                        </CssClassConditional>
                        <CssClassConditional>
                          <ClassName value="cd-header-button" />
                        </CssClassConditional>
                      </CssClass>
                    </Button>
                  </Children>
                  <CssClass>
                    <CssClassConditional>
                      <ClassName value="{theme}-panel" />
                      <IsThemedStyle value="True" />
                    </CssClassConditional>
                    <CssClassConditional>
                      <ClassName value="width-auto" />
                    </CssClassConditional>
                    <CssClassConditional>
                      <ClassName value="display-flex" />
                    </CssClassConditional>
                    <CssClassConditional>
                      <ClassName value="padding-menuspacer-long" />
                      <Bindings>
                        <Binding SourceProperty="Condition" Expression="not globals.forms.master.showMenu" />
                      </Bindings>
                    </CssClassConditional>
                  </CssClass>
                </Panel>
              </Children>
              <CssClass>
                <CssClassConditional>
                  <ClassName value="{theme}-panel" />
                  <IsThemedStyle value="True" />
                </CssClassConditional>
              </CssClass>
            </Panel>
            <Panel>
              <Name value="pnl_actionBtns_right" />
              <Orientation value="Horizontal" />
              <Panel.Height value="#" />
              <Panel.Width value="*" />
              <Children>
                <Button>
                  <Name value="btnClose" />
                  <Caption value="Zavřít" />
                  <Panel.Height value="#" />
                  <Panel.Width value="*" />
                  <OnClick>
                    <ActionEvent ReferencedAction="~handler_button_close_OnClick" />
                  </OnClick>
                  <CssClass>
                    <CssClassConditional>
                      <ClassName value="{theme}-button" />
                      <IsThemedStyle value="True" />
                    </CssClassConditional>
                    <CssClassConditional>
                      <ClassName value="cd-header-button" />
                    </CssClassConditional>
                  </CssClass>
                </Button>
              </Children>
              <CssClass>
                <CssClassConditional>
                  <ClassName value="{theme}-panel" />
                  <IsThemedStyle value="True" />
                </CssClassConditional>
                <CssClassConditional>
                  <ClassName value="flright" />
                </CssClassConditional>
                <CssClassConditional>
                  <ClassName value="width-auto" />
                </CssClassConditional>
              </CssClass>
            </Panel>
          </Children>
          <CssClass>
            <CssClassConditional>
              <ClassName value="{theme}-panel" />
              <IsThemedStyle value="True" />
            </CssClassConditional>
            <CssClassConditional>
              <ClassName value="{theme}-header" />
              <IsThemedStyle value="True" />
            </CssClassConditional>
            <CssClassConditional>
              <ClassName value="no-border-left" />
            </CssClassConditional>
            <CssClassConditional>
              <ClassName value="{theme}-nav-bar-controls" />
              <IsThemedStyle value="True" />
            </CssClassConditional>
          </CssClass>
        </Panel>
        <CollapsibleGroupBox identity="collapsibleGroupBox.cfca4faa9e574885bad67cbe322167a7">
          <Name value="cgbHeader" />
          <caption value="Hlavička" />
          <collapsedIconClass value="fa fa-plus-square-o" />
          <nonCollapsedIconClass value="fa fa-minus-square-o" />
          <Panel.Height value="#" />
          <Panel.Width value="*" />
          <Content>
            <Panel>
              <Name value="pnlHeader" />
              <Orientation value="Vertical" />
              <Children>
                <Panel>
                  <Name value="pnlHeaderR1" />
                  <Orientation value="Horizontal" />
                  <Panel.Height value="#" />
                  <Panel.Width value="*" />
                  <Children>
                    <TextBox>
                      <Name value="edb_PlaceCountry" />
                      <Caption value="Evid." />
                      <CaptionPosition value="Top" />
                      <IsEnabled value="False" />
                      <Margin value="6, 0, 6, 6 px" />
                      <Panel.Height value="#" />
                      <Panel.Width value="5%" />
                      <Bindings>
                        <Binding SourceProperty="Data" Expression="model.msg.Country" />
                      </Bindings>
                      <CssClass>
                        <CssClassConditional>
                          <ClassName value="{theme}-textbox" />
                          <IsThemedStyle value="True" />
                        </CssClassConditional>
                      </CssClass>
                    </TextBox>
                    <TextBox>
                      <Name value="edb_PlaceID" />
                      <Caption value="číslo schváleného místa" />
                      <CaptionPosition value="Top" />
                      <IsEnabled value="False" />
                      <Margin value="6, 6, 6, 0 px" />
                      <Panel.Height value="#" />
                      <Panel.Width value="30%" />
                      <Bindings>
                        <Binding SourceProperty="Data" Expression="model.msg.PlaceID" />
                      </Bindings>
                      <CssClass>
                        <CssClassConditional>
                          <ClassName value="{theme}-textbox" />
                          <IsThemedStyle value="True" />
                        </CssClassConditional>
                      </CssClass>
                    </TextBox>
                    <TextBox>
                      <Name value="edb_ResponsibleCustomsOffice" />
                      <Caption value="Celní úřad zapisující" />
                      <CaptionPosition value="Top" />
                      <IsEnabled value="False" />
                      <Panel.Height value="#" />
                      <Panel.Width value="65%" />
                      <Bindings>
                        <Binding SourceProperty="Data" Expression="model.msg.ResponsibleCustomsOffice" />
                        <Binding SourceProperty="IsRequiredMarkVisible" Expression="model.msg.ResponsibleCustomsOffice.isRequired()" />
                      </Bindings>
                      <CssClass>
                        <CssClassConditional>
                          <ClassName value="{theme}-textbox" />
                          <IsThemedStyle value="True" />
                        </CssClassConditional>
                      </CssClass>
                    </TextBox>
                  </Children>
                  <CssClass>
                    <CssClassConditional>
                      <ClassName value="{theme}-panel" />
                      <IsThemedStyle value="True" />
                    </CssClassConditional>
                  </CssClass>
                </Panel>
                <Panel>
                  <Name value="pnlHeaderR2" />
                  <Orientation value="Horizontal" />
                  <Panel.Height value="#" />
                  <Panel.Width value="*" />
                  <Children>
                    <TextBox>
                      <Name value="edb_TIN" />
                      <Caption value="Osoba, které bylo místo schváleno (EORI)" />
                      <CaptionPosition value="Top" />
                      <Panel.Height value="#" />
                      <Panel.Width value="35%" />
                      <Bindings>
                        <Binding SourceProperty="Data" Expression="model.msg.TIN" />
                        <Binding SourceProperty="IsRequiredMarkVisible" Expression="model.msg.TIN.isRequired()" />
                        <Binding SourceProperty="IsEnabled" Expression="ui.textBoxes.edb_TIN.IsEnabled" />
                      </Bindings>
                      <CssClass>
                        <CssClassConditional>
                          <ClassName value="{theme}-textbox" />
                          <IsThemedStyle value="True" />
                        </CssClassConditional>
                      </CssClass>
                    </TextBox>
                    <TextBox>
                      <Name value="edb_TinName" />
                      <Caption value="Název / jméno subjektu" />
                      <CaptionPosition value="Top" />
                      <IsEnabled value="False" />
                      <Panel.Height value="#" />
                      <Panel.Width value="65%" />
                      <Bindings>
                        <Binding SourceProperty="Data" Expression="model.msg.TinName" />
                        <Binding SourceProperty="IsRequiredMarkVisible" Expression="model.msg.TinName.isRequired()" />
                      </Bindings>
                      <CssClass>
                        <CssClassConditional>
                          <ClassName value="{theme}-textbox" />
                          <IsThemedStyle value="True" />
                        </CssClassConditional>
                      </CssClass>
                    </TextBox>
                  </Children>
                  <CssClass>
                    <CssClassConditional>
                      <ClassName value="{theme}-panel" />
                      <IsThemedStyle value="True" />
                    </CssClassConditional>
                  </CssClass>
                </Panel>
              </Children>
              <CssClass>
                <CssClassConditional>
                  <ClassName value="{theme}-panel" />
                  <IsThemedStyle value="True" />
                </CssClassConditional>
              </CssClass>
            </Panel>
          </Content>
          <Bindings>
            <Binding SourceProperty="isVisible" Expression="ui.groupBoxes.cgbHeader.IsVisible" />
          </Bindings>
          <conditionalCssClass>
            <CssClassConditional>
              <ClassName value="{theme}-collapsiblegroupbox" />
              <IsThemedStyle value="True" />
            </CssClassConditional>
          </conditionalCssClass>
        </CollapsibleGroupBox>
        <CollapsibleGroupBox identity="collapsibleGroupBox.cfca4faa9e574885bad67cbe322167a7">
          <Name value="cgbClientErrors" />
          <collapsedIconClass value="fa fa-plus-square-o" />
          <nonCollapsedIconClass value="fa fa-minus-square-o" />
          <Panel.Height value="#" />
          <Panel.Width value="*" />
          <Content>
            <ClientValidationSummary identity="ValidationSummary.0f608ab4a81a4349b35a8398ddd72445">
              <Name value="clientValidationSummary" />
              <errorPointerMap reference="~epm" />
              <OnItemClick>
                <ActionEvent ReferencedAction="~handler_clientValidationSummary_OnItemClick" />
              </OnItemClick>
              <Bindings>
                <Binding SourceProperty="validationErrors" Expression="form.error.clientValidationErrors" />
                <Binding SourceProperty="validationRoot" Expression="form.model.msg" />
              </Bindings>
              <columns>
                <validationSummaryColumn identity="ValidationSummary.0f608ab4a81a4349b35a8398ddd72445">
                  <Name value="vscMessage" />
                  <columnCaption value="Zpráva" />
                  <propertyName value="Message" />
                </validationSummaryColumn>
                <validationSummaryColumn identity="ValidationSummary.0f608ab4a81a4349b35a8398ddd72445">
                  <Name value="vscPointer" />
                  <columnCaption value="Místo" />
                  <columnRole value="pointer" />
                  <propertyName value="Pointer" />
                </validationSummaryColumn>
              </columns>
              <conditionalCssClass>
                <CssClassConditional>
                  <ClassName value="{theme}-clientvalidationsummary" />
                  <IsThemedStyle value="True" />
                </CssClassConditional>
              </conditionalCssClass>
            </ClientValidationSummary>
          </Content>
          <Bindings>
            <Binding SourceProperty="isVisible" Expression="ui.groupBoxes.cgbClientErrors.IsVisible" />
            <Binding SourceProperty="caption" Expression="ui.groupBoxes.cgbClientErrors.Caption" />
          </Bindings>
          <conditionalCssClass>
            <CssClassConditional>
              <ClassName value="{theme}-collapsiblegroupbox" />
              <IsThemedStyle value="True" />
            </CssClassConditional>
          </conditionalCssClass>
        </CollapsibleGroupBox>
        <Panel>
          <Name value="pnlBody" />
          <Orientation value="Horizontal" />
          <Panel.Height value="#" />
          <Panel.Width value="*" />
          <Children>
            <CollapsibleGroupBox identity="collapsibleGroupBox.cfca4faa9e574885bad67cbe322167a7">
              <Name value="cgbAddress" />
              <caption value="Adresa" />
              <collapsedIconClass value="fa fa-plus-square-o" />
              <nonCollapsedIconClass value="fa fa-minus-square-o" />
              <Panel.Height value="#" />
              <Panel.Width value="*" />
              <Content>
                <Panel>
                  <Name value="pnlAddress" />
                  <Orientation value="Vertical" />
                  <Children>
                    <TextBox>
                      <Name value="edb_Name" />
                      <Caption value="Označení místa" />
                      <CaptionPosition value="Top" />
                      <Panel.Height value="#" />
                      <Panel.Width value="*" />
                      <Bindings>
                        <Binding SourceProperty="Data" Expression="model.msg.PlaceDetail.Name" />
                        <Binding SourceProperty="IsRequiredMarkVisible" Expression="model.msg.PlaceDetail.Name.isRequired()" />
                        <Binding SourceProperty="IsEnabled" Expression="isEditOn" />
                      </Bindings>
                      <CssClass>
                        <CssClassConditional>
                          <ClassName value="{theme}-textbox" />
                          <IsThemedStyle value="True" />
                        </CssClassConditional>
                      </CssClass>
                    </TextBox>
                    <TextBox>
                      <Name value="edb_StreetAndNr" />
                      <Caption value="Ulice a č.p." />
                      <CaptionPosition value="Top" />
                      <Panel.Height value="#" />
                      <Panel.Width value="*" />
                      <Bindings>
                        <Binding SourceProperty="Data" Expression="model.msg.PlaceDetail.StreetAndNr" />
                        <Binding SourceProperty="IsRequiredMarkVisible" Expression="model.msg.PlaceDetail.StreetAndNr.isRequired()" />
                        <Binding SourceProperty="IsEnabled" Expression="isEditOn" />
                      </Bindings>
                      <CssClass>
                        <CssClassConditional>
                          <ClassName value="{theme}-textbox" />
                          <IsThemedStyle value="True" />
                        </CssClassConditional>
                      </CssClass>
                    </TextBox>
                    <Panel>
                      <Name value="pnlCity" />
                      <Orientation value="Horizontal" />
                      <Panel.Height value="#" />
                      <Panel.Width value="*" />
                      <Children>
                        <TextBox>
                          <Name value="edb_City" />
                          <Caption value="Město" />
                          <CaptionPosition value="Top" />
                          <Panel.Height value="#" />
                          <Panel.Width value="*" />
                          <Bindings>
                            <Binding SourceProperty="Data" Expression="model.msg.PlaceDetail.City" />
                            <Binding SourceProperty="IsRequiredMarkVisible" Expression="model.msg.PlaceDetail.City.isRequired()" />
                            <Binding SourceProperty="IsEnabled" Expression="isEditOn" />
                          </Bindings>
                          <CssClass>
                            <CssClassConditional>
                              <ClassName value="{theme}-textbox" />
                              <IsThemedStyle value="True" />
                            </CssClassConditional>
                          </CssClass>
                        </TextBox>
                        <TextBox>
                          <Name value="edb_PostCode" />
                          <Caption value="PSČ" />
                          <CaptionPosition value="Top" />
                          <Panel.Height value="#" />
                          <Panel.Width value="*" />
                          <Bindings>
                            <Binding SourceProperty="Data" Expression="model.msg.PlaceDetail.PostCode" />
                            <Binding SourceProperty="IsRequiredMarkVisible" Expression="model.msg.PlaceDetail.PostCode.isRequired()" />
                            <Binding SourceProperty="IsEnabled" Expression="isEditOn" />
                          </Bindings>
                          <CssClass>
                            <CssClassConditional>
                              <ClassName value="{theme}-textbox" />
                              <IsThemedStyle value="True" />
                            </CssClassConditional>
                          </CssClass>
                        </TextBox>
                      </Children>
                      <CssClass>
                        <CssClassConditional>
                          <ClassName value="{theme}-panel" />
                          <IsThemedStyle value="True" />
                        </CssClassConditional>
                      </CssClass>
                    </Panel>
                    <ReferenceCombo>
                      <Name value="cbb_Country" />
                      <Caption value="Země" />
                      <CaptionPosition value="Top" />
                      <DisplayMember value="_description" />
                      <Panel.Height value="#" />
                      <Panel.Width value="*" />
                      <ReferenceList reference="~cbb_Country_FltCodelist" />
                      <Bindings>
                        <Binding SourceProperty="Data" Expression="model.msg.PlaceDetail.Country" />
                        <Binding SourceProperty="IsRequiredMarkVisible" Expression="model.msg.PlaceDetail.Country.isRequired()" />
                        <Binding SourceProperty="IsEnabled" Expression="isEditOn" />
                      </Bindings>
                      <CssClass>
                        <CssClassConditional>
                          <ClassName value="{theme}-referencecombo" />
                          <IsThemedStyle value="True" />
                        </CssClassConditional>
                      </CssClass>
                    </ReferenceCombo>
                    <Button>
                      <Name value="btnCrs" />
                      <Caption value="Načíst adresu z CRS" />
                      <Panel.Height value="#" />
                      <Panel.Width value="150px" />
                      <OnClick>
                        <ActionEvent ReferencedAction="~handler_btnCrs_OnClick" />
                      </OnClick>
                      <Bindings>
                        <Binding SourceProperty="IsVisible" Expression="ui.buttons.btnCrs.IsVisible" />
                        <Binding SourceProperty="IsEnabled" Expression="ui.buttons.btnCrs.IsEnabled" />
                      </Bindings>
                      <CssClass>
                        <CssClassConditional>
                          <ClassName value="{theme}-button" />
                          <IsThemedStyle value="True" />
                        </CssClassConditional>
                      </CssClass>
                    </Button>
                  </Children>
                  <CssClass>
                    <CssClassConditional>
                      <ClassName value="{theme}-panel" />
                      <IsThemedStyle value="True" />
                    </CssClassConditional>
                  </CssClass>
                </Panel>
              </Content>
              <Bindings>
                <Binding SourceProperty="isVisible" Expression="ui.groupBoxes.cgbAddress.IsVisible" />
              </Bindings>
              <conditionalCssClass>
                <CssClassConditional>
                  <ClassName value="{theme}-collapsiblegroupbox" />
                  <IsThemedStyle value="True" />
                </CssClassConditional>
              </conditionalCssClass>
            </CollapsibleGroupBox>
            <CollapsibleGroupBox identity="collapsibleGroupBox.cfca4faa9e574885bad67cbe322167a7">
              <Name value="cgbSpec" />
              <caption value="Specifikace" />
              <collapsedIconClass value="fa fa-plus-square-o" />
              <nonCollapsedIconClass value="fa fa-minus-square-o" />
              <Panel.Height value="#" />
              <Panel.Width value="*" />
              <Content>
                <Panel>
                  <Name value="pnlSpec" />
                  <Orientation value="Horizontal" />
                  <Children>
                    <TextBox>
                      <Name value="edb_PlaceSpecification" />
                      <Caption value="Specifikace místa" />
                      <CaptionPosition value="Top" />
                      <InputType value="Multiline" />
                      <Panel.Height value="#" />
                      <Panel.Width value="*" />
                      <Rows value="5" />
                      <Bindings>
                        <Binding SourceProperty="Data" Expression="model.msg.PlaceDetail.PlaceSpecification" />
                        <Binding SourceProperty="IsRequiredMarkVisible" Expression="model.msg.PlaceDetail.PlaceSpecification.isRequired()" />
                        <Binding SourceProperty="IsEnabled" Expression="isEditOn" />
                      </Bindings>
                      <CssClass>
                        <CssClassConditional>
                          <ClassName value="{theme}-textbox" />
                          <IsThemedStyle value="True" />
                        </CssClassConditional>
                      </CssClass>
                    </TextBox>
                  </Children>
                  <CssClass>
                    <CssClassConditional>
                      <ClassName value="{theme}-panel" />
                      <IsThemedStyle value="True" />
                    </CssClassConditional>
                  </CssClass>
                </Panel>
              </Content>
              <Bindings>
                <Binding SourceProperty="isVisible" Expression="ui.groupBoxes.cgbSpec.IsVisible" />
              </Bindings>
              <conditionalCssClass>
                <CssClassConditional>
                  <ClassName value="{theme}-collapsiblegroupbox" />
                  <IsThemedStyle value="True" />
                </CssClassConditional>
              </conditionalCssClass>
            </CollapsibleGroupBox>
            <CollapsibleGroupBox identity="collapsibleGroupBox.cfca4faa9e574885bad67cbe322167a7">
              <Name value="cgbCuAndPerson" />
              <caption value="CÚ" />
              <collapsedIconClass value="fa fa-plus-square-o" />
              <nonCollapsedIconClass value="fa fa-minus-square-o" />
              <Panel.Height value="#" />
              <Panel.Width value="*" />
              <Content>
                <Panel>
                  <Name value="pnlCuAndPerson" />
                  <Orientation value="Vertical" />
                  <Children>
                    <ReferenceLookup identity="referenceLookup.10b2d4db46e641b5bba23b33e3568c2e">
                      <Name value="acb_ValidityCustomsOffice" />
                      <Caption value="CÚ příslušný ke schválenému místu" />
                      <CaptionPosition value="Top" />
                      <DataApiObject reference="~acb_ValidityCustomsOffice_FltCodelist" />
                      <DisplayMember value="_description" />
                      <MinChars value="3" />
                      <Panel.Height value="#" />
                      <Panel.Width value="*" />
                      <Bindings>
                        <Binding SourceProperty="Data" Expression="model.msg.PlaceDetail.ValidityCustomsOffice" />
                        <Binding SourceProperty="IsEnabled" Expression="isEditOn" />
                        <Binding SourceProperty="IsRequiredMarkVisible" Expression="model.msg.PlaceDetail.ValidityCustomsOffice.isRequired()" />
                      </Bindings>
                      <CssClass>
                        <CssClassConditional>
                          <ClassName value="{theme}-referencelookup" />
                          <IsThemedStyle value="True" />
                        </CssClassConditional>
                      </CssClass>
                    </ReferenceLookup>
                    <TextBox>
                      <Name value="edb_ResponsiblePerson" />
                      <Caption value="Osobní číslo uživatele" />
                      <CaptionPosition value="Top" />
                      <IsEnabled value="False" />
                      <Panel.Height value="#" />
                      <Panel.Width value="*" />
                      <Bindings>
                        <Binding SourceProperty="Data" Expression="model.msg.PlaceDetail.ResponsiblePerson" />
                        <Binding SourceProperty="IsRequiredMarkVisible" Expression="model.msg.PlaceDetail.ResponsiblePerson.isRequired()" />
                      </Bindings>
                      <CssClass>
                        <CssClassConditional>
                          <ClassName value="{theme}-textbox" />
                          <IsThemedStyle value="True" />
                        </CssClassConditional>
                      </CssClass>
                    </TextBox>
                  </Children>
                  <CssClass>
                    <CssClassConditional>
                      <ClassName value="{theme}-panel" />
                      <IsThemedStyle value="True" />
                    </CssClassConditional>
                  </CssClass>
                </Panel>
              </Content>
              <Bindings>
                <Binding SourceProperty="isVisible" Expression="ui.groupBoxes.cgbCuAndPerson.IsVisible" />
              </Bindings>
              <conditionalCssClass>
                <CssClassConditional>
                  <ClassName value="{theme}-collapsiblegroupbox" />
                  <IsThemedStyle value="True" />
                </CssClassConditional>
              </conditionalCssClass>
            </CollapsibleGroupBox>
            <CollapsibleGroupBox identity="collapsibleGroupBox.cfca4faa9e574885bad67cbe322167a7">
              <Name value="cgbValidity" />
              <caption value="Platnost" />
              <collapsedIconClass value="fa fa-plus-square-o" />
              <nonCollapsedIconClass value="fa fa-minus-square-o" />
              <Panel.Height value="#" />
              <Panel.Width value="*" />
              <Content>
                <Panel>
                  <Name value="pnlValidity" />
                  <Orientation value="Vertical" />
                  <Children>
                    <DatePicker>
                      <Name value="dtp_ValidityStartDate" />
                      <Caption value="Datum zápisu schváleného místa" />
                      <CaptionPosition value="Top" />
                      <Panel.Height value="#" />
                      <Panel.Width value="*" />
                      <Bindings>
                        <Binding SourceProperty="Data" Expression="model.msg.PlaceDetail.ValidityStartDate" />
                        <Binding SourceProperty="IsRequiredMarkVisible" Expression="model.msg.PlaceDetail.ValidityStartDate.isRequired()" />
                        <Binding SourceProperty="IsEnabled" Expression="ui.datePickers.dtp_ValidityStartDate.IsEnabled" />
                      </Bindings>
                      <CssClass>
                        <CssClassConditional>
                          <ClassName value="{theme}-datepicker" />
                          <IsThemedStyle value="True" />
                        </CssClassConditional>
                      </CssClass>
                    </DatePicker>
                    <DatePicker>
                      <Name value="dtp_ValidityEndDate" />
                      <Caption value="Zneplatnění od" />
                      <CaptionPosition value="Top" />
                      <IsEnabled value="False" />
                      <Panel.Height value="#" />
                      <Panel.Width value="*" />
                      <Bindings>
                        <Binding SourceProperty="Data" Expression="model.msg.PlaceDetail.ValidityEndDate" />
                        <Binding SourceProperty="IsRequiredMarkVisible" Expression="model.msg.PlaceDetail.ValidityEndDate.isRequired()" />
                      </Bindings>
                      <CssClass>
                        <CssClassConditional>
                          <ClassName value="{theme}-datepicker" />
                          <IsThemedStyle value="True" />
                        </CssClassConditional>
                      </CssClass>
                    </DatePicker>
                    <DatePicker>
                      <Name value="dtp_EvidenceDate" />
                      <Caption value="Datum zápisu do aplikace" />
                      <CaptionPosition value="Top" />
                      <IsEnabled value="False" />
                      <Panel.Height value="#" />
                      <Panel.Width value="*" />
                      <Bindings>
                        <Binding SourceProperty="Data" Expression="model.msg.PlaceDetail.EvidenceDate" />
                        <Binding SourceProperty="IsRequiredMarkVisible" Expression="model.msg.PlaceDetail.EvidenceDate.isRequired()" />
                      </Bindings>
                      <CssClass>
                        <CssClassConditional>
                          <ClassName value="{theme}-datepicker" />
                          <IsThemedStyle value="True" />
                        </CssClassConditional>
                      </CssClass>
                    </DatePicker>
                  </Children>
                  <CssClass>
                    <CssClassConditional>
                      <ClassName value="{theme}-panel" />
                      <IsThemedStyle value="True" />
                    </CssClassConditional>
                  </CssClass>
                </Panel>
              </Content>
              <Bindings>
                <Binding SourceProperty="isVisible" Expression="ui.groupBoxes.cgbValidity.IsVisible" />
              </Bindings>
              <conditionalCssClass>
                <CssClassConditional>
                  <ClassName value="{theme}-collapsiblegroupbox" />
                  <IsThemedStyle value="True" />
                </CssClassConditional>
              </conditionalCssClass>
            </CollapsibleGroupBox>
            <CollapsibleGroupBox identity="collapsibleGroupBox.cfca4faa9e574885bad67cbe322167a7">
              <Name value="cgbFiles" />
              <caption value="Text a přílohy" />
              <collapsedIconClass value="fa fa-plus-square-o" />
              <nonCollapsedIconClass value="fa fa-minus-square-o" />
              <Panel.Height value="#" />
              <Panel.Width value="*" />
              <Content>
                <Panel>
                  <Name value="pnlFiles" />
                  <Orientation value="Vertical" />
                  <Children>
                    <PagingRepeaterCtrl identity="PagingRepeaterCtrl.280e5bd891d54eda9e7c2bfaaf9e4af4">
                      <Name value="prcFile" />
                      <IndicateDataErrors value="False" />
                      <Panel.Height value="#" />
                      <Panel.Width value="*" />
                      <OnItemAdd>
                        <ActionEvent ReferencedAction="~handler_prcCurrentAnnex_OnItemAdd" />
                      </OnItemAdd>
                      <Bindings>
                        <Binding SourceProperty="Data" Expression="model.msg.PlaceDetail.File" />
                        <Binding SourceProperty="Index" Expression="ui.tables.stFile.Index" />
                        <Binding SourceProperty="AllowAdd" Expression="isEditOn" />
                        <Binding SourceProperty="AllowRemove" Expression="isEditOn" />
                      </Bindings>
                    </PagingRepeaterCtrl>
                    <SelectionTable identity="SelectionTable.cc32b616f4094d929bc32891cf024bb9">
                      <Name value="stFile" />
                      <Panel.Height value="#" />
                      <Panel.Width value="*" />
                      <Bindings>
                        <Binding SourceProperty="Data" Expression="model.msg.PlaceDetail.File" />
                        <Binding SourceProperty="Index" Expression="ui.tables.stFile.Index" />
                      </Bindings>
                      <Columns>
                        <SelectionTableColumn identity="SelectionTable.cc32b616f4094d929bc32891cf024bb9">
                          <Name value="stcFile_IsFullText" />
                          <Caption value="Plný text?" />
                          <ColumnWidth value="10%" />
                          <Content>
                            <CheckBox>
                              <Name value="cbFile_IsFullText" />
                              <CaptionPosition value="Hide" />
                              <Bindings>
                                <Binding SourceProperty="Data" Expression="IsFullText" />
                                <Binding SourceProperty="IsEnabled" Expression="form.isEditOn" />
                              </Bindings>
                              <CssClass>
                                <CssClassConditional>
                                  <ClassName value="{theme}-checkbox" />
                                  <IsThemedStyle value="True" />
                                </CssClassConditional>
                              </CssClass>
                            </CheckBox>
                          </Content>
                        </SelectionTableColumn>
                        <SelectionTableColumn identity="SelectionTable.cc32b616f4094d929bc32891cf024bb9">
                          <Name value="stcFile_FileName" />
                          <Caption value="Soubor" />
                          <Content>
                            <Panel>
                              <Name value="pnlFile_FileName" />
                              <Orientation value="Horizontal" />
                              <Children>
                                <HyperLink>
                                  <Name value="hlFile_FileName" />
                                  <Panel.Height value="#" />
                                  <Panel.Width value="*" />
                                  <Bindings>
                                    <Binding SourceProperty="Href" Expression="_fileUrl" />
                                    <Binding SourceProperty="Data" Expression="FileName" />
                                    <Binding SourceProperty="IsVisible" Expression="not form.isEditOn" />
                                  </Bindings>
                                  <CssClass>
                                    <CssClassConditional>
                                      <ClassName value="{theme}-hyperlink" />
                                      <IsThemedStyle value="True" />
                                    </CssClassConditional>
                                  </CssClass>
                                </HyperLink>
                                <Label>
                                  <Name value="lblFile_FileName" />
                                  <Panel.Height value="#" />
                                  <Panel.Width value="*" />
                                  <Bindings>
                                    <Binding SourceProperty="Data" Expression="FileName" />
                                    <Binding SourceProperty="IsVisible" Expression="form.isEditOn" />
                                  </Bindings>
                                  <CssClass>
                                    <CssClassConditional>
                                      <ClassName value="{theme}-label" />
                                      <IsThemedStyle value="True" />
                                    </CssClassConditional>
                                  </CssClass>
                                </Label>
                              </Children>
                              <CssClass>
                                <CssClassConditional>
                                  <ClassName value="{theme}-panel" />
                                  <IsThemedStyle value="True" />
                                </CssClassConditional>
                              </CssClass>
                            </Panel>
                          </Content>
                        </SelectionTableColumn>
                        <SelectionTableColumn identity="SelectionTable.cc32b616f4094d929bc32891cf024bb9">
                          <Name value="stcFile_FileType" />
                          <Caption value="Typ" />
                          <ColumnWidth value="15%" />
                          <Content>
                            <Label>
                              <Name value="lblFile_FileType" />
                              <Bindings>
                                <Binding SourceProperty="Data" Expression="FileType" />
                              </Bindings>
                              <CssClass>
                                <CssClassConditional>
                                  <ClassName value="{theme}-label" />
                                  <IsThemedStyle value="True" />
                                </CssClassConditional>
                              </CssClass>
                            </Label>
                          </Content>
                        </SelectionTableColumn>
                        <SelectionTableColumn identity="SelectionTable.cc32b616f4094d929bc32891cf024bb9">
                          <Name value="stcFile_FileSize" />
                          <Caption value="Velikost" />
                          <ColumnWidth value="10%" />
                          <Content>
                            <Label>
                              <Name value="lblFile_FileSize" />
                              <Bindings>
                                <Binding SourceProperty="Data" Expression="FileSize" />
                              </Bindings>
                              <CssClass>
                                <CssClassConditional>
                                  <ClassName value="{theme}-label" />
                                  <IsThemedStyle value="True" />
                                </CssClassConditional>
                              </CssClass>
                            </Label>
                          </Content>
                        </SelectionTableColumn>
                      </Columns>
                      <CssClass>
                        <CssClassConditional>
                          <ClassName value="{theme}-selectiontable" />
                          <IsThemedStyle value="True" />
                        </CssClassConditional>
                      </CssClass>
                    </SelectionTable>
                  </Children>
                  <CssClass>
                    <CssClassConditional>
                      <ClassName value="{theme}-panel" />
                      <IsThemedStyle value="True" />
                    </CssClassConditional>
                  </CssClass>
                </Panel>
              </Content>
              <Bindings>
                <Binding SourceProperty="isVisible" Expression="ui.groupBoxes.cgbFiles.IsVisible" />
              </Bindings>
              <conditionalCssClass>
                <CssClassConditional>
                  <ClassName value="{theme}-collapsiblegroupbox" />
                  <IsThemedStyle value="True" />
                </CssClassConditional>
              </conditionalCssClass>
            </CollapsibleGroupBox>
          </Children>
          <CssClass>
            <CssClassConditional>
              <ClassName value="{theme}-panel" />
              <IsThemedStyle value="True" />
            </CssClassConditional>
            <CssClassConditional>
              <ClassName value="{theme}-panel-uniform" />
              <IsThemedStyle value="True" />
            </CssClassConditional>
            <CssClassConditional>
              <ClassName value="display-flex" />
            </CssClassConditional>
          </CssClass>
        </Panel>
        <CollapsibleGroupBox identity="collapsibleGroupBox.cfca4faa9e574885bad67cbe322167a7">
          <Name value="cgbVersions" />
          <caption value="Historie stavů/verzí" />
          <collapsedIconClass value="fa fa-plus-square-o" />
          <isExpanded value="False" />
          <nonCollapsedIconClass value="fa fa-minus-square-o" />
          <Panel.Height value="#" />
          <Panel.Width value="*" />
          <Content>
            <SelectionTable identity="SelectionTable.cc32b616f4094d929bc32891cf024bb9">
              <Name value="stVersions" />
              <IsScrollable value="True" />
              <MaxHeight value="230px" />
              <OnRowClick>
                <ActionEvent ReferencedAction="~handler_stVersions_OnRowClick" />
              </OnRowClick>
              <Bindings>
                <Binding SourceProperty="Data" Expression="model.msg.PlaceHistory" />
                <Binding SourceProperty="Index" Expression="ui.tables.stVersions.Index" />
                <Binding SourceProperty="SelectionEnabled" Expression="ui.tables.stVersions.SelectionEnabled" />
              </Bindings>
              <Columns>
                <SelectionTableColumn identity="SelectionTable.cc32b616f4094d929bc32891cf024bb9">
                  <Name value="stcVersions_Guid" />
                  <Caption value=" " />
                  <IsVisible value="False" />
                  <Content>
                    <Label>
                      <Name value="lblVersions_Guid" />
                      <IsVisible value="False" />
                      <Bindings>
                        <Binding SourceProperty="Data" Expression="GUID" />
                      </Bindings>
                      <CssClass>
                        <CssClassConditional>
                          <ClassName value="{theme}-label" />
                          <IsThemedStyle value="True" />
                        </CssClassConditional>
                      </CssClass>
                    </Label>
                  </Content>
                </SelectionTableColumn>
                <SelectionTableColumn identity="SelectionTable.cc32b616f4094d929bc32891cf024bb9">
                  <Name value="stcVersions_ValidityStartDate" />
                  <Caption value="Platné od" />
                  <Content>
                    <Label>
                      <Name value="lblVersions_ValidityStartDate" />
                      <Bindings>
                        <Binding SourceProperty="Data" Expression="ValidityStartDate" />
                      </Bindings>
                      <CssClass>
                        <CssClassConditional>
                          <ClassName value="{theme}-label" />
                          <IsThemedStyle value="True" />
                        </CssClassConditional>
                      </CssClass>
                    </Label>
                  </Content>
                </SelectionTableColumn>
                <SelectionTableColumn identity="SelectionTable.cc32b616f4094d929bc32891cf024bb9">
                  <Name value="stcVersions_ValidityEndDate" />
                  <Caption value="Konec platnosti této události" />
                  <Content>
                    <Label>
                      <Name value="lblVersions_ValidityEndDate" />
                      <Bindings>
                        <Binding SourceProperty="Data" Expression="ValidityEndDate" />
                      </Bindings>
                      <CssClass>
                        <CssClassConditional>
                          <ClassName value="{theme}-label" />
                          <IsThemedStyle value="True" />
                        </CssClassConditional>
                      </CssClass>
                    </Label>
                  </Content>
                </SelectionTableColumn>
              </Columns>
              <CssClass>
                <CssClassConditional>
                  <ClassName value="{theme}-selectiontable" />
                  <IsThemedStyle value="True" />
                </CssClassConditional>
                <CssClassConditional>
                  <ClassName value="clickable-rows" />
                </CssClassConditional>
                <CssClassConditional>
                  <ClassName value="selected-bold" />
                </CssClassConditional>
              </CssClass>
            </SelectionTable>
          </Content>
          <conditionalCssClass>
            <CssClassConditional>
              <ClassName value="{theme}-collapsiblegroupbox" />
              <IsThemedStyle value="True" />
            </CssClassConditional>
          </conditionalCssClass>
        </CollapsibleGroupBox>
      </Children>
      <CssClass>
        <CssClassConditional>
          <ClassName value="{theme}-panel" />
          <IsThemedStyle value="True" />
        </CssClassConditional>
        <CssClassConditional>
          <ClassName value="form-container" />
        </CssClassConditional>
      </CssClass>
    </Panel>
  </Content>
  <DataContext>
    <DataContext>
      <Children>
        <Attribute>
          <Name value="action" />
          <Caption value="Action" />
          <MetaType reference="+MetaTypes.ActionPl" />
        </Attribute>
        <Computed>
          <Name value="isEditOn" />
          <Caption value="Is edit on" />
          <Expression IsValid="True">
            <ExpressionText><![CDATA[globals.user.hasPermissionWriteAseo and
isFalse(action in [enums.ActionPl.NONE, enums.ActionPl.Delete])]]></ExpressionText>
            <ResultType>
              <BaseType value="Bool" />
            </ResultType>
          </Expression>
        </Computed>
        <Computed>
          <Name value="state" />
          <Caption value="State" />
          <Expression IsValid="True">
            <ExpressionText><![CDATA[enums.StatePl.toValue(form.model.msg.State, enums.StatePl.NONE)]]></ExpressionText>
            <ResultType>
              <BaseType value="Enum" />
              <MetaType reference="+MetaTypes.StatePl" />
            </ResultType>
          </Expression>
        </Computed>
        <Complex>
          <Name value="params" />
          <Caption value="Params" />
          <Children>
            <Include>
              <Include reference="+DataEntities.PL_params" />
            </Include>
          </Children>
        </Complex>
        <Complex>
          <Name value="model" />
          <Caption value="Model" />
          <Children>
            <Complex>
              <Name value="msg" />
              <Caption value="Msg" />
              <Children>
                <Include>
                  <Include reference="+DataEntities.ASEOPLDataResponseEx" />
                </Include>
              </Children>
            </Complex>
            <Complex>
              <Name value="onNodeActivated" />
              <Caption value="On node activated" />
              <Children>
                <Include>
                  <Include reference="+DataEntities.onNodeActivatedEvent" />
                </Include>
              </Children>
            </Complex>
            <Complex>
              <Name value="refKeys" />
              <Caption value="Ref keys" />
              <Children>
                <Attribute>
                  <Name value="arrValidityCustomsOffice" />
                  <Caption value="Arr validity customs office" />
                  <DeclaredType>
                    <AttributeType />
                  </DeclaredType>
                </Attribute>
              </Children>
            </Complex>
          </Children>
        </Complex>
        <Complex>
          <Name value="ui" />
          <Caption value="Ui" />
          <Children>
            <Complex>
              <Name value="navTree" />
              <Caption value="Nav tree" />
              <Children>
                <Attribute>
                  <Name value="selectedNode" />
                  <Caption value="Selected node" />
                  <Description value="vybrany node z navTree" />
                  <DeclaredType>
                    <AttributeType />
                  </DeclaredType>
                </Attribute>
              </Children>
            </Complex>
            <Complex>
              <Name value="groupBoxes" />
              <Caption value="Group boxes" />
              <Children>
                <Complex>
                  <Name value="cgbHeader" />
                  <Caption value="Cgb header" />
                  <Children>
                    <Computed>
                      <Name value="IsVisible" />
                      <Caption value="Is visible" />
                      <Expression IsValid="True">
                        <ExpressionText><![CDATA[true]]></ExpressionText>
                        <ResultType>
                          <BaseType value="Bool" />
                        </ResultType>
                      </Expression>
                    </Computed>
                  </Children>
                </Complex>
                <Complex>
                  <Name value="cgbClientErrors" />
                  <Caption value="cgbClientErrors" />
                  <Children>
                    <Attribute>
                      <Name value="_IsVisible" />
                      <Caption value="_ is visible" />
                      <DeclaredType>
                        <AttributeType>
                          <BaseType value="Bool" />
                        </AttributeType>
                      </DeclaredType>
                    </Attribute>
                    <Computed>
                      <Name value="IsVisible" />
                      <Caption value="IsVisible" />
                      <Expression IsValid="True">
                        <ExpressionText><![CDATA[isTrue(_IsVisible) and
isTrue(form.action <> enums.ActionPl.NONE) and
isTrue(form.model.validationErrorsCount() > 0)]]></ExpressionText>
                        <ResultType>
                          <BaseType value="Bool" />
                        </ResultType>
                      </Expression>
                    </Computed>
                    <Computed>
                      <Name value="Caption" />
                      <Caption value="Caption" />
                      <Expression IsValid="True">
                        <ExpressionText><![CDATA[stringFormat("Chyby - klient{0}", 
  form.error.clientValidationErrors.count() > 0 ?
  " (" + toString(form.error.clientValidationErrors.count()) + ")" : 
  "" 
)]]></ExpressionText>
                        <ResultType>
                          <BaseType value="String" />
                        </ResultType>
                      </Expression>
                    </Computed>
                  </Children>
                </Complex>
                <Complex>
                  <Name value="cgbAddress" />
                  <Caption value="Cgb address" />
                  <Children>
                    <Computed>
                      <Name value="IsVisible" />
                      <Caption value="Is visible" />
                      <Expression IsValid="True">
                        <ExpressionText><![CDATA[form.ui.navTree.selectedNode in ["All", "Detail"]]]></ExpressionText>
                        <ResultType>
                          <BaseType value="Bool" />
                        </ResultType>
                      </Expression>
                    </Computed>
                  </Children>
                </Complex>
                <Complex>
                  <Name value="cgbSpec" />
                  <Caption value="Cgb spec" />
                  <Children>
                    <Computed>
                      <Name value="IsVisible" />
                      <Caption value="Is visible" />
                      <Expression IsValid="True">
                        <ExpressionText><![CDATA[form.ui.navTree.selectedNode in ["All", "Detail"]]]></ExpressionText>
                        <ResultType>
                          <BaseType value="Bool" />
                        </ResultType>
                      </Expression>
                    </Computed>
                  </Children>
                </Complex>
                <Complex>
                  <Name value="cgbCuAndPerson" />
                  <Caption value="Cgb cu and person" />
                  <Children>
                    <Computed>
                      <Name value="IsVisible" />
                      <Caption value="Is visible" />
                      <Expression IsValid="True">
                        <ExpressionText><![CDATA[form.ui.navTree.selectedNode in ["All", "Detail"]]]></ExpressionText>
                        <ResultType>
                          <BaseType value="Bool" />
                        </ResultType>
                      </Expression>
                    </Computed>
                  </Children>
                </Complex>
                <Complex>
                  <Name value="cgbValidity" />
                  <Caption value="Cgb validity" />
                  <Children>
                    <Computed>
                      <Name value="IsVisible" />
                      <Caption value="Is visible" />
                      <Expression IsValid="True">
                        <ExpressionText><![CDATA[form.ui.navTree.selectedNode in ["All", "Detail"]]]></ExpressionText>
                        <ResultType>
                          <BaseType value="Bool" />
                        </ResultType>
                      </Expression>
                    </Computed>
                  </Children>
                </Complex>
                <Complex>
                  <Name value="cgbFiles" />
                  <Caption value="Cgb files" />
                  <Children>
                    <Computed>
                      <Name value="IsVisible" />
                      <Caption value="Is visible" />
                      <Expression IsValid="True">
                        <ExpressionText><![CDATA[form.ui.navTree.selectedNode in ["All", "Files"]]]></ExpressionText>
                        <ResultType>
                          <BaseType value="Bool" />
                        </ResultType>
                      </Expression>
                    </Computed>
                  </Children>
                </Complex>
              </Children>
            </Complex>
            <Complex>
              <Name value="tables" />
              <Caption value="Tables" />
              <Children>
                <Complex>
                  <Name value="stVersions" />
                  <Caption value="St versions" />
                  <Children>
                    <Attribute>
                      <Name value="Index" />
                      <Caption value="Index" />
                      <DeclaredType>
                        <AttributeType>
                          <BaseType value="Integer" />
                        </AttributeType>
                      </DeclaredType>
                      <OnUserChange>
                        <ActionEvent ReferencedAction="+UiParts.PL.handler_Index_OnUserChange" />
                      </OnUserChange>
                    </Attribute>
                    <Computed>
                      <Name value="SelectionEnabled" />
                      <Caption value="Selection enabled" />
                      <Expression IsValid="True">
                        <ExpressionText><![CDATA[isTrueOrDefault(form.action = enums.ActionPl.NONE)]]></ExpressionText>
                        <ResultType>
                          <BaseType value="Bool" />
                        </ResultType>
                      </Expression>
                    </Computed>
                  </Children>
                </Complex>
                <Complex>
                  <Name value="stFile" />
                  <Caption value="St file" />
                  <Children>
                    <Attribute>
                      <Name value="Index" />
                      <Caption value="Index" />
                      <DeclaredType>
                        <AttributeType>
                          <BaseType value="Integer" />
                        </AttributeType>
                      </DeclaredType>
                    </Attribute>
                  </Children>
                </Complex>
              </Children>
            </Complex>
            <Complex>
              <Name value="buttons" />
              <Caption value="Buttons" />
              <Children>
                <Computed>
                  <Name value="showActionButtons" />
                  <Caption value="Show action buttons" />
                  <Expression IsValid="True">
                    <ExpressionText><![CDATA[isTrue(form.ui.tables.stVersions.Index = 1) and
isTrue(form.state <> enums.StatePl.P3) and
isTrue(form.action = enums.ActionPl.NONE)]]></ExpressionText>
                    <ResultType>
                      <BaseType value="Bool" />
                    </ResultType>
                  </Expression>
                </Computed>
                <Complex>
                  <Name value="btnModify" />
                  <Caption value="btnModify" />
                  <Children>
                    <Computed>
                      <Name value="IsVisible" />
                      <Caption value="IsVisible" />
                      <Expression IsValid="True">
                        <ExpressionText><![CDATA[this.owner().showActionButtons]]></ExpressionText>
                        <ResultType>
                          <BaseType value="Bool" />
                        </ResultType>
                      </Expression>
                    </Computed>
                    <Computed>
                      <Name value="IsEnabled" />
                      <Caption value="IsEnabled" />
                      <Expression IsValid="True">
                        <ExpressionText><![CDATA[globals.user.hasPermissionWriteAseo]]></ExpressionText>
                        <ResultType>
                          <BaseType value="Bool" />
                        </ResultType>
                      </Expression>
                    </Computed>
                  </Children>
                </Complex>
                <Complex>
                  <Name value="btnDelete" />
                  <Caption value="btnDelete" />
                  <Children>
                    <Computed>
                      <Name value="IsVisible" />
                      <Caption value="IsVisible" />
                      <Expression IsValid="True">
                        <ExpressionText><![CDATA[this.owner().showActionButtons]]></ExpressionText>
                        <ResultType>
                          <BaseType value="Bool" />
                        </ResultType>
                      </Expression>
                    </Computed>
                    <Computed>
                      <Name value="IsEnabled" />
                      <Caption value="IsEnabled" />
                      <Expression IsValid="True">
                        <ExpressionText><![CDATA[globals.user.hasPermissionWriteAseo]]></ExpressionText>
                        <ResultType>
                          <BaseType value="Bool" />
                        </ResultType>
                      </Expression>
                    </Computed>
                  </Children>
                </Complex>
                <Complex>
                  <Name value="btnActionConfirm" />
                  <Caption value="buttonProceedActionConfirm" />
                  <Children>
                    <Computed>
                      <Name value="IsVisible" />
                      <Caption value="IsVisible" />
                      <Expression IsValid="True">
                        <ExpressionText><![CDATA[isTrue(form.action <> enums.ActionPl.NONE)]]></ExpressionText>
                        <ResultType>
                          <BaseType value="Bool" />
                        </ResultType>
                      </Expression>
                    </Computed>
                    <Computed>
                      <Name value="IsEnabled" />
                      <Caption value="IsEnabled" />
                      <Expression IsValid="True">
                        <ExpressionText><![CDATA[isTrue(form.action <> enums.ActionPl.NONE)]]></ExpressionText>
                        <ResultType>
                          <BaseType value="Bool" />
                        </ResultType>
                      </Expression>
                    </Computed>
                    <Computed>
                      <Name value="Caption" />
                      <Caption value="Caption" />
                      <Expression IsValid="True">
                        <ExpressionText><![CDATA[form.action.enumCaption()]]></ExpressionText>
                        <ResultType>
                          <BaseType value="String" />
                        </ResultType>
                      </Expression>
                    </Computed>
                  </Children>
                </Complex>
                <Complex>
                  <Name value="btnActionCancel" />
                  <Caption value="buttonActionCancel" />
                  <Children>
                    <Computed>
                      <Name value="IsVisible" />
                      <Caption value="IsVisible" />
                      <Expression IsValid="True">
                        <ExpressionText><![CDATA[isFalse(form.action in [enums.ActionPl.NONE, enums.ActionPl.New])]]></ExpressionText>
                        <ResultType>
                          <BaseType value="Bool" />
                        </ResultType>
                      </Expression>
                    </Computed>
                    <Computed>
                      <Name value="IsEnabled" />
                      <Caption value="IsEnabled" />
                      <Expression IsValid="True">
                        <ExpressionText><![CDATA[isTrue(form.action <> enums.ActionPl.NONE)]]></ExpressionText>
                        <ResultType>
                          <BaseType value="Bool" />
                        </ResultType>
                      </Expression>
                    </Computed>
                  </Children>
                </Complex>
                <Complex>
                  <Name value="btnActionValidation" />
                  <Caption value="btnActionValidation" />
                  <Children>
                    <Computed>
                      <Name value="IsVisible" />
                      <Caption value="IsVisible" />
                      <Expression IsValid="True">
                        <ExpressionText><![CDATA[isFalse(form.action in [enums.ActionPl.NONE, enums.ActionPl.Delete])]]></ExpressionText>
                        <ResultType>
                          <BaseType value="Bool" />
                        </ResultType>
                      </Expression>
                    </Computed>
                    <Computed>
                      <Name value="IsEnabled" />
                      <Caption value="IsEnabled" />
                      <Expression IsValid="True">
                        <ExpressionText><![CDATA[form.isEditOn]]></ExpressionText>
                        <ResultType>
                          <BaseType value="Bool" />
                        </ResultType>
                      </Expression>
                    </Computed>
                  </Children>
                </Complex>
                <Complex>
                  <Name value="btnCrs" />
                  <Caption value="btnCrs" />
                  <Children>
                    <Computed>
                      <Name value="IsVisible" />
                      <Caption value="IsVisible" />
                      <Expression IsValid="True">
                        <ExpressionText><![CDATA[isFalse(form.action in [enums.ActionPl.NONE, enums.ActionPl.Delete])]]></ExpressionText>
                        <ResultType>
                          <BaseType value="Bool" />
                        </ResultType>
                      </Expression>
                    </Computed>
                    <Computed>
                      <Name value="IsEnabled" />
                      <Caption value="IsEnabled" />
                      <Expression IsValid="True">
                        <ExpressionText><![CDATA[form.isEditOn and form.model.msg.TIN.hasValue()]]></ExpressionText>
                        <ResultType>
                          <BaseType value="Bool" />
                        </ResultType>
                      </Expression>
                    </Computed>
                  </Children>
                </Complex>
              </Children>
            </Complex>
            <Complex>
              <Name value="textBoxes" />
              <Caption value="Text boxes" />
              <Children>
                <Complex>
                  <Name value="edb_TIN" />
                  <Caption value="Edb _ TIN" />
                  <Children>
                    <Computed>
                      <Name value="IsEnabled" />
                      <Caption value="Is enabled" />
                      <Expression IsValid="True">
                        <ExpressionText><![CDATA[isTrue(form.action = enums.ActionPl.New)]]></ExpressionText>
                        <ResultType>
                          <BaseType value="Bool" />
                        </ResultType>
                      </Expression>
                    </Computed>
                  </Children>
                </Complex>
              </Children>
            </Complex>
            <Complex>
              <Name value="datePickers" />
              <Caption value="Date pickers" />
              <Children>
                <Complex>
                  <Name value="dtp_ValidityStartDate" />
                  <Caption value="dtp_ValidityStartDate" />
                  <Children>
                    <Computed>
                      <Name value="IsEnabled" />
                      <Caption value="Is enabled" />
                      <Expression IsValid="True">
                        <ExpressionText><![CDATA[isTrue(form.action = enums.ActionPl.New)]]></ExpressionText>
                        <ResultType>
                          <BaseType value="Bool" />
                        </ResultType>
                      </Expression>
                    </Computed>
                  </Children>
                </Complex>
              </Children>
            </Complex>
          </Children>
        </Complex>
        <Complex>
          <Name value="error" />
          <Caption value="Error" />
          <Children>
            <Collection>
              <Name value="clientValidationErrors" />
              <Caption value="Client validation errors" />
              <Children>
                <Attribute>
                  <Name value="Message" />
                  <Caption value="Message" />
                  <DeclaredType>
                    <AttributeType />
                  </DeclaredType>
                </Attribute>
                <Attribute>
                  <Name value="Pointer" />
                  <Caption value="Pointer" />
                  <DeclaredType>
                    <AttributeType />
                  </DeclaredType>
                </Attribute>
                <Attribute>
                  <Name value="Type" />
                  <Caption value="Type" />
                  <DeclaredType>
                    <AttributeType />
                  </DeclaredType>
                </Attribute>
              </Children>
            </Collection>
          </Children>
        </Complex>
      </Children>
      <Modifiers>
        <Modifier>
          <Name value="modifier_FFCAB4E8_PlaceDetail" />
          <SourcePath value="model.msg.PlaceDetail" />
        </Modifier>
        <Modifier>
          <Name value="modifier_A3CC0204_File" />
          <SourcePath value="model.msg.PlaceDetail.File" />
          <Children>
            <Computed>
              <Name value="_fileUrl" />
              <Caption value="_ file url" />
              <Expression IsValid="True">
                <ExpressionText><![CDATA[globals.cicUrl + "ASEOPLFileRequestEx?GUID={" + this.owner().owner().GUID + "}&GUIDDetail={" + this.owner().GUID + "}&GUIDFile={" + this.GUID + "}&version=" + globals.version]]></ExpressionText>
                <ResultType>
                  <BaseType value="String" />
                </ResultType>
              </Expression>
            </Computed>
            <Attribute>
              <Name value="FileContent" />
              <Caption value="File content" />
              <DeclaredType>
                <AttributeType />
              </DeclaredType>
            </Attribute>
            <Attribute>
              <Name value="FileSize" />
              <Caption value="File size" />
              <DeclaredType>
                <AttributeType>
                  <BaseType value="Integer" />
                </AttributeType>
              </DeclaredType>
            </Attribute>
          </Children>
        </Modifier>
        <Modifier>
          <Name value="modifier_6237F039_TIN" />
          <ShowAsChanges value="True" />
          <SourcePath value="model.msg.TIN" />
          <OnUserChange>
            <ActionEvent ReferencedAction="+UiParts.PL.handler_modifier_6237F039_TIN_OnUserChange" />
          </OnUserChange>
        </Modifier>
        <Modifier>
          <Name value="modifier_6BB71F10_ValidityStartDate" />
          <ShowAsChanges value="True" />
          <SourcePath value="model.msg.PlaceDetail.ValidityStartDate" />
          <OnChange>
            <ActionEvent ReferencedAction="+UiParts.PL.handler_modifier_6BB71F10_ValidityStartDate_OnChange" />
          </OnChange>
        </Modifier>
        <Modifier>
          <Name value="modifier_79BE7FBC_ValidityCustomsOffice" />
          <ShowAsChanges value="True" />
          <SourcePath value="model.msg.PlaceDetail.ValidityCustomsOffice" />
          <Validators>
            <Validator Name="refKeys">
              <ErrorMessage IsValid="True">
                <ExpressionText><![CDATA[stringFormat("Hodnota '{0}' není v číselníku", attr.CELUPLAT_R)]]></ExpressionText>
                <ResultType>
                  <BaseType value="String" />
                </ResultType>
              </ErrorMessage>
              <IsValid IsValid="True">
                <ExpressionText><![CDATA[attr.isEmpty() ? true :
globals.forms.master.isDownloadingCodelists ? true :
functions.includes(form.model.refKeys.arrValidityCustomsOffice, attr.CELUPLAT_R)]]></ExpressionText>
                <ResultType>
                  <BaseType value="Bool" />
                </ResultType>
              </IsValid>
            </Validator>
          </Validators>
        </Modifier>
      </Modifiers>
    </DataContext>
  </DataContext>
  <OnCreate>
    <ActionEvent ReferencedAction="~init" />
  </OnCreate>
  <Actions>
    <ActionBlock>
      <Name value="handler_button_close_OnClick" />
      <IsPrivate value="True" />
      <ActionLangBody IsValid="True">
        <Script><![CDATA[navigation.main.lists.go()]]></Script>
      </ActionLangBody>
      <DataContext>
        <ActionDataContext />
      </DataContext>
    </ActionBlock>
    <ActionBlock>
      <Name value="init" />
      <ActionLangBody IsValid="True">
        <Script><![CDATA[var master = globals.forms.master
var model = form.model
var msg = model.msg

// # copy global parameters and clear them up
var gp = globals.forms.PL.params
var p = form.params
p.fromJson(gp.toJson())
gp.clear()

// # navigation tree
master.isNavigationTreeVisible = false
ntc.resetFinishedSetup()
master.isNavigationTreeVisible = true

ntc.beginSetup("navTrees::_ntPL", defaultString())

var all = ntc.addNode("All", "Vše")
var detail = ntc.addNode("Detail", "Informace o místu")
var files = ntc.addNode("Files", "Text a přílohy")

ntc.finishSetup()

ntc.focusNode("All")

// #nacteni dat

form.action = enums.ActionPl.NONE
if p.Mode = "VIEW" then
	if hasValue(p.Guid) then
		form.actions.loadData(p.Guid)		
	else
		system.consoleError("Missing parameter Guid")
	endif
else if p.Mode = "NEW" then
	var dt = getDateTime()
	form.action = enums.ActionPl.New
	
	msg.ResponsibleCustomsOffice = globals.user.CuCode
	msg.PlaceDetail.ResponsiblePerson = globals.user.userName
	msg.PlaceDetail.ValidityStartDate = dt
	msg.PlaceDetail.EvidenceDate = dt

	if not globals.forms.master.isDownloadingCodelists then
		var item = acb_ValidityCustomsOffice_FltCodelist.getItemByStringColumnAsync("CELUPLAT_R", globals.user.CuCode)
		msg.PlaceDetail.ValidityCustomsOffice.fromJson(item.getJsonString())		
	endif
else
	system.consoleError("Invalid value of parameter Mode: " + p.Mode)	
endif endif
]]></Script>
      </ActionLangBody>
      <DataContext>
        <ActionDataContext />
      </DataContext>
    </ActionBlock>
    <ActionBlock>
      <Name value="loadData" />
      <ActionLangBody IsValid="True">
        <Script><![CDATA[request.GUID = guid
request.PlaceDetail.GUID = placeGuid

form.actions.sendRequest("ASEOPLDataRequestEx", request.toJson(), "ASEOPLDataResponseEx")

if globals.sendResult.Valid then
	var sr = globals.sendResult
	
	var msg = form.model.msg
	
    msg.clear()
    msg.fromJson(sr.Message)
    
	// oznaci spravny radek v tabulce verzi
	var selectedEvent = msg.PlaceHistory.selectFirst(Current.SelectedDetail)
	if selectedEvent.hasValue() then
		form.ui.tables.stVersions.Index = selectedEvent.index()
	endif
	
	form.action = enums.ActionPl.NONE
else
    apiobjects.notificationsCtrl.addError("Data místa nebyla načtena.")
endif]]></Script>
      </ActionLangBody>
      <DataContext>
        <ActionDataContext>
          <Children>
            <Attribute>
              <Name value="guid" />
              <Caption value="Guid" />
              <DataContextParameter.IsInput value="True" />
              <DataContextParameter.IsInputRequired value="True" />
              <DeclaredType>
                <AttributeType />
              </DeclaredType>
            </Attribute>
            <Attribute>
              <Name value="placeGuid" />
              <Caption value="Place guid" />
              <DataContextParameter.IsInput value="True" />
              <DeclaredType>
                <AttributeType />
              </DeclaredType>
            </Attribute>
            <Complex>
              <Name value="request" />
              <Caption value="Request" />
              <Children>
                <Include>
                  <Include reference="+DataEntities.ASEOPLDataRequestEx" />
                </Include>
              </Children>
            </Complex>
          </Children>
        </ActionDataContext>
      </DataContext>
    </ActionBlock>
    <ActionBlock>
      <Name value="sendRequest" />
      <ActionLangBody IsValid="True">
        <Script><![CDATA[// prepare error in case we need it
var err = globals.forms.error.params
err.Caption = "Error sending " + request

// clear send result
globals.sendResult.clear()

globals.IsBusy = true
var response = apiobjects.cic.postAsync(request, requestData)
globals.IsBusy = false

var type = response.getMessageType()
if type in [expectedResponse] then
	globals.sendResult.Valid = true
	globals.sendResult.Type = type
	globals.sendResult.Message = response.getJsonString()
else if type in ["IN906A"] then
	err.MsgType = type
	err.Msg = response.getJsonString()
	system.consoleError(err.MsgType)
	system.consoleError(err.Msg)
	navigation.main.error.goAndBack()
else if response.isError() then
	err.Message = response.getErrorMessage()
	system.consoleError(err.Message)
	navigation.main.error.goAndBack()
else
	err.Message = "Unexpected response message type: " + type
	system.consoleError(err.Message)
	navigation.main.error.goAndBack()
endif endif endif
]]></Script>
      </ActionLangBody>
      <DataContext>
        <ActionDataContext>
          <Children>
            <Attribute>
              <Name value="request" />
              <Caption value="Request" />
              <DataContextParameter.IsInput value="True" />
              <DataContextParameter.IsInputRequired value="True" />
              <DeclaredType>
                <AttributeType />
              </DeclaredType>
            </Attribute>
            <Attribute>
              <Name value="requestData" />
              <Caption value="Request data" />
              <DataContextParameter.IsInput value="True" />
              <DataContextParameter.IsInputRequired value="True" />
              <DeclaredType>
                <AttributeType />
              </DeclaredType>
            </Attribute>
            <Attribute>
              <Name value="expectedResponse" />
              <Caption value="Expected response" />
              <DataContextParameter.IsInput value="True" />
              <DataContextParameter.IsInputRequired value="True" />
              <DeclaredType>
                <AttributeType />
              </DeclaredType>
            </Attribute>
          </Children>
        </ActionDataContext>
      </DataContext>
    </ActionBlock>
    <ActionBlock>
      <Name value="handler_eventDispatcher_OnMessage" />
      <IsPrivate value="True" />
      <ActionLangBody IsValid="True">
        <Script><![CDATA[var model = form.model
var ui = form.ui
var navTree = ui.navTree

if params.source = "main_master_navTree" then
	if params.type = "onNodeActivated" then
		var ev = model.onNodeActivated 
		ev.fromJson(params.data)
	
		navTree.selectedNode = ev.id
		
		system.console(model.onNodeActivated.toJson())
	else
		system.consoleError("Invalid event type " + params.type)
	endif
else if params.source = "main_master_codelistGroup"	then
	if params.type = "onBackgroundLoadingFinished" then
		form.actions.onBackgroundLoadingFinished()
	else
		system.consoleError("Invalid event type " + params.type)
	endif	
endif endif]]></Script>
      </ActionLangBody>
      <DataContext>
        <ActionDataContext />
      </DataContext>
    </ActionBlock>
    <ActionBlock>
      <Name value="handler_stVersions_OnRowClick" />
      <IsPrivate value="True" />
      <ActionLangBody IsValid="True">
        <Script><![CDATA[if isTrue(form.action <> enums.ActionPl.NONE) then
	notificationsCtrl.addInfo("Při editaci se nelze přepnout na historickou verzi")
endif]]></Script>
      </ActionLangBody>
      <DataContext>
        <ActionDataContext />
      </DataContext>
    </ActionBlock>
    <ActionBlock>
      <Name value="handler_Index_OnUserChange" />
      <Description value="stVersions" />
      <IsPrivate value="True" />
      <ActionLangBody IsValid="True">
        <Script><![CDATA[var index = params.data.Index
var history = form.model.msg.PlaceHistory
var selectedPlace = history.selectFirst(Current.index() = index)

if selectedPlace.hasValue() then
	var placeGuid = selectedPlace.GUID
	
	globals.IsBusy = True
	form.actions.loadData(form.params.GUID, placeGuid)
	globals.IsBusy = False
endif]]></Script>
      </ActionLangBody>
      <DataContext>
        <ActionDataContext />
      </DataContext>
    </ActionBlock>
    <ActionBlock>
      <Name value="handler_prcCurrentAnnex_OnItemAdd" />
      <IsPrivate value="True" />
      <ActionLangBody IsValid="True">
        <Script><![CDATA[var p = globals.forms.file.params
p.Filter = "image/png, image/gif, application/pdf"
navigation.main.file.goAndBack()

var res = packages.main.globals.forms.file.result 
if res.IsValid then
	params.newItem.IsFulltext = false
	params.newItem.FileName = res.FileName
	params.newItem.FileType = res.FileType
	params.newItem.FileContent = res.FileContent
	params.newItem.FileSize = res.FileSize
else
	params.newItem.removeMe()
endif]]></Script>
      </ActionLangBody>
      <DataContext>
        <ActionDataContext />
      </DataContext>
    </ActionBlock>
    <ActionBlock>
      <Name value="handler_buttonActionCancel_OnClick" />
      <IsPrivate value="True" />
      <ActionLangBody IsValid="True">
        <Script><![CDATA[form.actions.loadData(form.params.GUID)]]></Script>
      </ActionLangBody>
      <DataContext>
        <ActionDataContext />
      </DataContext>
    </ActionBlock>
    <ActionBlock>
      <Name value="handler_btnActionValidation_OnClick" />
      <IsPrivate value="True" />
      <ActionLangBody IsValid="True">
        <Script><![CDATA[var msg = form.model.msg

if not msg.isValid() then
	msg.setTouched(true)
	form.ui.groupBoxes.cgbClientErrors._IsVisible = true
endif]]></Script>
      </ActionLangBody>
      <DataContext>
        <ActionDataContext />
      </DataContext>
    </ActionBlock>
    <ActionBlock>
      <Name value="onBackgroundLoadingFinished" />
      <Description value="zavola se po dokonceni nacteni ciselniku" />
      <ActionLangBody IsValid="True">
        <Script><![CDATA[if form.params.Mode = "NEW" then
	var msg = form.model.msg
	var item = acb_ValidityCustomsOffice_FltCodelist.getItemByStringColumnAsync("CELUPLAT_R", globals.user.CuCode)
	
	msg.PlaceDetail.ValidityCustomsOffice.fromJson(item.getJsonString())
endif

form.actions.setRefKeys()]]></Script>
      </ActionLangBody>
      <DataContext>
        <ActionDataContext />
      </DataContext>
    </ActionBlock>
    <ActionBlock>
      <Name value="loadRegisterData" />
      <ActionLangBody IsValid="True">
        <Script><![CDATA[var msg = form.model.msg
var detail = msg.PlaceDetail

/* read data from CRS */
actions.sendRequestCrs(msg.TIN, msg.ResponsibleCustomsOffice, true)

if globals.sendResult.Valid then
	var sr = globals.sendResult
	response.fromJson(sr.Message)

	if response.Subjekty.isEmpty() then
		if response.KodChyby.isEmpty() then
			notificationsCtrl.addWarning("Nepodařilo se najít žádné odpovídající subjekty")
		else
			var warningMessage = stringFormat(
				"Kód chyby: {0} Popis Chyby: {1}", response.KodChyby, response.PopisChyby)
		
			notificationsCtrl.addWarning(warningMessage)
		endif
	else		
		var mainCol = response.Subjekty.selectFirst()
		if not mainCol.Subjekt.isEmpty() then
			var innerCol = mainCol.Subjekt.selectFirst()
			if not innerCol.SloucenaAdresa.isEmpty() then
				var targetCol = innerCol.SloucenaAdresa.selectFirst()
				
				msg.TinName = targetCol.ZkracenyNazev
				
				if incAddress then
					detail.StreetAndNr.clear()
					detail.City.clear()
					detail.PostCode.clear()
					detail.Country.clear()

					detail.StreetAndNr = targetCol.UliceACislo
					detail.City = targetCol.Mesto
					detail.PostCode = targetCol.PSC
					
					var item = cbb_Country_FltCodelist.getItemByStringColumnAsync("ZEMEEU", targetCol.Zeme)
					detail.Country.fromJson(item.getJsonString())
				endif

				apiobjects.notificationsCtrl.addSuccess("Podařilo se získat data z CRS")
			else
				apiobjects.notificationsCtrl.addError("Došlo k chybě načítání dat z CRS")
			endif
		else
			apiobjects.notificationsCtrl.addError("Došlo k chybě načítání dat z CRS")
		endif
	endif
else if globals.sendResult.StatusCode = 202 then
	notificationsCtrl.addWarning("Nepodařilo se najít žádné odpovídající subjekty")
else
	notificationsCtrl.addError("Došlo k chybě při komunikaci s Centrem")
endif endif]]></Script>
      </ActionLangBody>
      <DataContext>
        <ActionDataContext>
          <Children>
            <Attribute>
              <Name value="incAddress" />
              <Caption value="Inc address" />
              <DataContextParameter.IsInput value="True" />
              <DataContextParameter.IsInputRequired value="True" />
              <Description value="vc. adresy" />
              <DeclaredType>
                <AttributeType>
                  <BaseType value="Bool" />
                </AttributeType>
              </DeclaredType>
            </Attribute>
            <Complex>
              <Name value="response" />
              <Caption value="Response" />
              <Children>
                <Attribute>
                  <Name value="PopisChyby" />
                  <Caption value="PopisChyby" />
                  <MtsImportOptions.MTS.ID value="/SubjektPodleIdentifikatoruResponseCIC/PopisChyby" />
                  <MtsImportOptions.MTS.Type value="element" />
                  <DeclaredType>
                    <AttributeType />
                  </DeclaredType>
                </Attribute>
                <Attribute>
                  <Name value="KodChyby" />
                  <Caption value="KodChyby" />
                  <MtsImportOptions.MTS.ID value="/SubjektPodleIdentifikatoruResponseCIC/KodChyby" />
                  <MtsImportOptions.MTS.Type value="element" />
                  <DeclaredType>
                    <AttributeType />
                  </DeclaredType>
                </Attribute>
                <Collection>
                  <Name value="Subjekty" />
                  <Caption value="Subjekty" />
                  <Children>
                    <Collection>
                      <Name value="Subjekt" />
                      <Caption value="Subjekt" />
                      <Children>
                        <Attribute>
                          <Name value="Klic" />
                          <Caption value="Klic" />
                          <IsRequired value="True" />
                          <MetaType reference="+MetaTypes.CRSGuid" />
                          <MtsImportOptions.MTS.ID value="/SubjektPodleIdentifikatoruResponseCIC/Subjekty/Subjekt/Klic" />
                          <MtsImportOptions.MTS.Type value="element" />
                        </Attribute>
                        <Attribute>
                          <Name value="KlicVerze" />
                          <Caption value="KlicVerze" />
                          <IsRequired value="True" />
                          <MetaType reference="+MetaTypes.CRSGuid" />
                          <MtsImportOptions.MTS.ID value="/SubjektPodleIdentifikatoruResponseCIC/Subjekty/Subjekt/KlicVerze" />
                          <MtsImportOptions.MTS.Type value="element" />
                        </Attribute>
                        <Collection>
                          <Name value="SloucenaAdresa" />
                          <Caption value="Sloucena adresa" />
                          <Children>
                            <Attribute>
                              <Name value="PlnyNazev" />
                              <Caption value="Název subjektu" />
                              <IsRequired value="True" />
                              <MtsImportOptions.MTS.ID value="/SubjektPodleIdentifikatoruResponseCIC/Subjekty/Subjekt/SloucenaAdresa/PlnyNazev" />
                              <MtsImportOptions.MTS.Type value="element" />
                              <DeclaredType>
                                <AttributeType />
                              </DeclaredType>
                            </Attribute>
                            <Attribute>
                              <Name value="ZkracenyNazev" />
                              <Caption value="Krátký název subjektu" />
                              <MtsImportOptions.MTS.ID value="/SubjektPodleIdentifikatoruResponseCIC/Subjekty/Subjekt/SloucenaAdresa/ZkracenyNazev" />
                              <MtsImportOptions.MTS.Type value="element" />
                              <DeclaredType>
                                <AttributeType />
                              </DeclaredType>
                            </Attribute>
                            <Attribute>
                              <Name value="UliceACislo" />
                              <Caption value="Ulice a číslo" />
                              <IsRequired value="True" />
                              <MtsImportOptions.MTS.ID value="/SubjektPodleIdentifikatoruResponseCIC/Subjekty/Subjekt/SloucenaAdresa/UliceACislo" />
                              <MtsImportOptions.MTS.Type value="element" />
                              <DeclaredType>
                                <AttributeType />
                              </DeclaredType>
                            </Attribute>
                            <Attribute>
                              <Name value="Mesto" />
                              <Caption value="Město" />
                              <IsRequired value="True" />
                              <MtsImportOptions.MTS.ID value="/SubjektPodleIdentifikatoruResponseCIC/Subjekty/Subjekt/SloucenaAdresa/Mesto" />
                              <MtsImportOptions.MTS.Type value="element" />
                              <DeclaredType>
                                <AttributeType />
                              </DeclaredType>
                            </Attribute>
                            <Attribute>
                              <Name value="PSC" />
                              <Caption value="PSČ" />
                              <MtsImportOptions.MTS.ID value="/SubjektPodleIdentifikatoruResponseCIC/Subjekty/Subjekt/SloucenaAdresa/PSC" />
                              <MtsImportOptions.MTS.Type value="element" />
                              <DeclaredType>
                                <AttributeType />
                              </DeclaredType>
                            </Attribute>
                            <Attribute>
                              <Name value="Zeme" />
                              <Caption value="Země" />
                              <IsRequired value="True" />
                              <MtsImportOptions.MTS.ID value="/SubjektPodleIdentifikatoruResponseCIC/Subjekty/Subjekt/SloucenaAdresa/Zeme" />
                              <MtsImportOptions.MTS.Type value="element" />
                              <DeclaredType>
                                <AttributeType />
                              </DeclaredType>
                            </Attribute>
                          </Children>
                        </Collection>
                      </Children>
                    </Collection>
                  </Children>
                </Collection>
              </Children>
            </Complex>
          </Children>
        </ActionDataContext>
      </DataContext>
    </ActionBlock>
    <ActionBlock>
      <Name value="handler_btnCrs_OnClick" />
      <IsPrivate value="True" />
      <ActionLangBody IsValid="True">
        <Script><![CDATA[var msg = form.model.msg

if msg.TIN.hasValue() then
	form.actions.loadRegisterData(true)
endif]]></Script>
      </ActionLangBody>
      <DataContext>
        <ActionDataContext />
      </DataContext>
    </ActionBlock>
    <ActionBlock>
      <Name value="handler_modifier_6237F039_TIN_OnUserChange" />
      <IsPrivate value="True" />
      <ActionLangBody IsValid="True">
        <Script><![CDATA[if params.data.TIN.hasValue() and isTrue(form.action = enums.ActionPl.New) then
	form.actions.loadRegisterData(false)
endif]]></Script>
      </ActionLangBody>
      <DataContext>
        <ActionDataContext />
      </DataContext>
    </ActionBlock>
    <ActionBlock>
      <Name value="handler_btnModify_OnClick" />
      <IsPrivate value="True" />
      <ActionLangBody IsValid="True">
        <Script><![CDATA[var msg = form.model.msg
var dt = getDateTime()

form.action = enums.ActionPl.Modify

msg.PlaceDetail.ValidityStartDate = dt
msg.PlaceDetail.EvidenceDate = dt
msg.PlaceDetail.ResponsiblePerson = globals.user.userName
msg.PlaceDetail.File.clear()

form.actions.loadRegisterData(false)]]></Script>
      </ActionLangBody>
      <DataContext>
        <ActionDataContext />
      </DataContext>
    </ActionBlock>
    <ActionBlock>
      <Name value="getValidityStartDate" />
      <Description value="returns current event ValidityStartDate or current dateTime" />
      <ActionLangBody IsValid="True">
        <Script><![CDATA[var detail = form.model.msg.PlaceDetail

result = getDateTime()
if hasValue(detail.ValidityStartDate) then
	result = detail.ValidityStartDate
endif]]></Script>
      </ActionLangBody>
      <DataContext>
        <ActionDataContext>
          <Children>
            <Attribute>
              <Name value="result" />
              <Caption value="Result" />
              <DataContextParameter.IsResult value="True" />
              <DeclaredType>
                <AttributeType>
                  <BaseType value="DateTime" />
                </AttributeType>
              </DeclaredType>
            </Attribute>
          </Children>
        </ActionDataContext>
      </DataContext>
    </ActionBlock>
    <ActionBlock>
      <Name value="setFilters" />
      <ActionLangBody IsValid="True">
        <Script><![CDATA[var dt = form.actions.getValidityStartDate()

var filter = acb_ValidityCustomsOffice_FltCodelist.resetFilter(false)
filter.filterByValidityDateTime(dt)
filter.commit()

filter = cbb_Country_FltCodelist.resetFilter(false)
filter.filterByValidityDateTime(dt)
filter.commit()

form.actions.setRefKeys()]]></Script>
      </ActionLangBody>
      <DataContext>
        <ActionDataContext />
      </DataContext>
    </ActionBlock>
    <ActionBlock>
      <Name value="handler_modifier_6BB71F10_ValidityStartDate_OnChange" />
      <IsPrivate value="True" />
      <ActionLangBody IsValid="True">
        <Script><![CDATA[form.actions.setFilters()]]></Script>
      </ActionLangBody>
      <DataContext>
        <ActionDataContext />
      </DataContext>
    </ActionBlock>
    <ActionBlock>
      <Name value="handler_btnActionConfirm_OnClick" />
      <IsPrivate value="True" />
      <ActionLangBody IsValid="True">
        <Script><![CDATA[var msg = form.model.msg
var action = form.action
var notification = defaultString()

if msg.isValid() then
	if action = enums.ActionPl.New then
		form.actions.sendRequest("ASEOPLNew", msg.toJson(), "CM002A")
		notification = "Místo bylo uloženo"
	else if action = enums.ActionPl.Modify then
		form.actions.sendRequest("ASEOPLModification", msg.toJson(), "CM002A")
		notification = "Místo bylo modifikováno"
	else if action = enums.ActionPl.Delete then
		msgDelete.GUID = msg.GUID
		form.actions.sendRequest("ASEOPLDelete", msgDelete.toJson(), "CM002A")
		notification = "Místo bylo zrušeno"
	else
		system.consoleError(stringFormat("Invalid action: {0}", action.enumCaption()))
	endif endif endif
	
	if globals.sendResult.Valid and hasValue(notification) then
		apiobjects.notificationsCtrl.addSuccess(notification)
		navigation.main.lists.go()
	endif	
else
	msg.setTouched(true)
	form.ui.groupBoxes.cgbClientErrors._IsVisible = true
endif]]></Script>
      </ActionLangBody>
      <DataContext>
        <ActionDataContext>
          <Children>
            <Complex>
              <Name value="msgDelete" />
              <Caption value="Msg delete" />
              <Children>
                <Include>
                  <Include reference="+DataEntities.ASEOPLDelete" />
                </Include>
              </Children>
            </Complex>
          </Children>
        </ActionDataContext>
      </DataContext>
    </ActionBlock>
    <ActionBlock>
      <Name value="handler_clientValidationSummary_OnItemClick" />
      <IsPrivate value="True" />
      <ActionLangBody IsValid="True">
        <Script><![CDATA[var ctr = params.errorSourceComponent
var node = params.navigationTreeNode
var ptr = params.pointer

if hasValue(node) then
	ntc.focusNode(node)
else
	ntc.focusNode("All")
endif

/*
var strings = globals.strings
strings.clear()
var split = actions.js_split(ptr, "/")
strings.fromJson(split)

foreach s in strings do
	var part = s.str
	var idx = indexOf(part, "[")
	
	if idx > 0 then
		var col = substring(part, 1, idx - 1)
		var num = toInt(substring(part, idx + 1, length(part) - length(col) - 2), 0)
		
		form.actions.SwitchToIndex(col, num)
	endif
endfor
*/

// to focus correct control
pageAPI.focusControl(ctr, defaultString())

// to focus correct control in case it is in Repeater
pageAPI.focusControl(ctr, ptr)

system.console("Clicked on: " + ptr)]]></Script>
      </ActionLangBody>
      <DataContext>
        <ActionDataContext />
      </DataContext>
    </ActionBlock>
    <ActionBlock>
      <Name value="handler_btnDelete_OnClick" />
      <IsPrivate value="True" />
      <ActionLangBody IsValid="True">
        <Script><![CDATA[form.action = enums.ActionPl.Delete]]></Script>
      </ActionLangBody>
      <DataContext>
        <ActionDataContext />
      </DataContext>
    </ActionBlock>
    <ActionBlock>
      <Name value="setRefKeys" />
      <Description value="sets reference keys arrays for validation" />
      <ActionLangBody IsValid="True">
        <Script><![CDATA[var refKeys = form.model.refKeys

var json = acb_ValidityCustomsOffice_FltCodelist.getDataAsJson()
refKeys.arrValidityCustomsOffice = actions.js_codelistToKeys(json, "CELUPLAT_R")]]></Script>
      </ActionLangBody>
      <DataContext>
        <ActionDataContext />
      </DataContext>
    </ActionBlock>
  </Actions>
  <ApiObjects>
    <FilteredCodelist identity="Codelist.2fd2d7af4a6d445bad8a58610632f8e0">
      <Name value="acb_ValidityCustomsOffice_FltCodelist" />
      <codelistSource reference="/(codeLists.2e35af8e5b484554915da40c527c1148)+GlobalApiObjects.CELUPLAT_R" />
    </FilteredCodelist>
    <FilteredCodelist identity="Codelist.2fd2d7af4a6d445bad8a58610632f8e0">
      <Name value="cbb_Country_FltCodelist" />
      <codelistSource reference="/(codeLists.2e35af8e5b484554915da40c527c1148)+GlobalApiObjects.ZEMEEU" />
    </FilteredCodelist>
    <EventDispatcher identity="EventDispatcher.eb764ceb30274f1e9a3d051d512d6b26">
      <Name value="eventDispatcher" />
      <OnMessage>
        <ActionEvent ReferencedAction="~handler_eventDispatcher_OnMessage" />
      </OnMessage>
    </EventDispatcher>
    <ErrorPointerMap identity="ErrorPointerMap.69320151074d4125908af3869d7556e1">
      <Name value="epm" />
      <items>
        <ErrorPointerMapItem identity="ErrorPointerMap.69320151074d4125908af3869d7556e1">
          <captionMask value="Country" />
          <errorSourceComponent value="edb_PlaceCountry" />
          <pointerPath value="Country" />
        </ErrorPointerMapItem>
        <ErrorPointerMapItem identity="ErrorPointerMap.69320151074d4125908af3869d7556e1">
          <captionMask value="PlaceID" />
          <errorSourceComponent value="edb_PlaceID" />
          <pointerPath value="PlaceID" />
        </ErrorPointerMapItem>
        <ErrorPointerMapItem identity="ErrorPointerMap.69320151074d4125908af3869d7556e1">
          <captionMask value="ResponsibleCustomsOffice" />
          <errorSourceComponent value="edb_ResponsibleCustomsOffice" />
          <pointerPath value="ResponsibleCustomsOffice" />
        </ErrorPointerMapItem>
        <ErrorPointerMapItem identity="ErrorPointerMap.69320151074d4125908af3869d7556e1">
          <captionMask value="TIN" />
          <errorSourceComponent value="edb_TIN" />
          <pointerPath value="TIN" />
        </ErrorPointerMapItem>
        <ErrorPointerMapItem identity="ErrorPointerMap.69320151074d4125908af3869d7556e1">
          <captionMask value="TinName" />
          <errorSourceComponent value="edb_TinName" />
          <pointerPath value="TinName" />
        </ErrorPointerMapItem>
        <ErrorPointerMapItem identity="ErrorPointerMap.69320151074d4125908af3869d7556e1">
          <captionMask value="PlaceDetail/Name" />
          <errorSourceComponent value="edb_Name" />
          <pointerPath value="PlaceDetail/Name" />
        </ErrorPointerMapItem>
        <ErrorPointerMapItem identity="ErrorPointerMap.69320151074d4125908af3869d7556e1">
          <captionMask value="PlaceDetail/StreetAndNr" />
          <errorSourceComponent value="edb_StreetAndNr" />
          <pointerPath value="PlaceDetail/StreetAndNr" />
        </ErrorPointerMapItem>
        <ErrorPointerMapItem identity="ErrorPointerMap.69320151074d4125908af3869d7556e1">
          <captionMask value="PlaceDetail/City" />
          <errorSourceComponent value="edb_City" />
          <pointerPath value="PlaceDetail/City" />
        </ErrorPointerMapItem>
        <ErrorPointerMapItem identity="ErrorPointerMap.69320151074d4125908af3869d7556e1">
          <captionMask value="PlaceDetail/PostCode" />
          <errorSourceComponent value="edb_PostCode" />
          <pointerPath value="PlaceDetail/PostCode" />
        </ErrorPointerMapItem>
        <ErrorPointerMapItem identity="ErrorPointerMap.69320151074d4125908af3869d7556e1">
          <captionMask value="PlaceDetail/Country" />
          <errorSourceComponent value="cbb_Country" />
          <pointerPath value="PlaceDetail/Country" />
        </ErrorPointerMapItem>
        <ErrorPointerMapItem identity="ErrorPointerMap.69320151074d4125908af3869d7556e1">
          <captionMask value="PlaceDetail/PlaceSpecification" />
          <errorSourceComponent value="edb_PlaceSpecification" />
          <pointerPath value="PlaceDetail/PlaceSpecification" />
        </ErrorPointerMapItem>
        <ErrorPointerMapItem identity="ErrorPointerMap.69320151074d4125908af3869d7556e1">
          <captionMask value="PlaceDetail/ValidityCustomsOffice" />
          <errorSourceComponent value="acb_ValidityCustomsOffice" />
          <pointerPath value="PlaceDetail/ValidityCustomsOffice" />
        </ErrorPointerMapItem>
        <ErrorPointerMapItem identity="ErrorPointerMap.69320151074d4125908af3869d7556e1">
          <captionMask value="PlaceDetail/ResponsiblePerson" />
          <errorSourceComponent value="edb_ResponsiblePerson" />
          <pointerPath value="PlaceDetail/ResponsiblePerson" />
        </ErrorPointerMapItem>
        <ErrorPointerMapItem identity="ErrorPointerMap.69320151074d4125908af3869d7556e1">
          <captionMask value="PlaceDetail/ValidityStartDate" />
          <errorSourceComponent value="dtp_ValidityStartDate" />
          <pointerPath value="PlaceDetail/ValidityStartDate" />
        </ErrorPointerMapItem>
        <ErrorPointerMapItem identity="ErrorPointerMap.69320151074d4125908af3869d7556e1">
          <captionMask value="PlaceDetail/ValidityEndDate" />
          <errorSourceComponent value="dtp_ValidityEndDate" />
          <pointerPath value="PlaceDetail/ValidityEndDate" />
        </ErrorPointerMapItem>
        <ErrorPointerMapItem identity="ErrorPointerMap.69320151074d4125908af3869d7556e1">
          <captionMask value="PlaceDetail/EvidenceDate" />
          <errorSourceComponent value="dtp_EvidenceDate" />
          <pointerPath value="PlaceDetail/EvidenceDate" />
        </ErrorPointerMapItem>
        <ErrorPointerMapItem identity="ErrorPointerMap.69320151074d4125908af3869d7556e1">
          <captionMask value="PlaceDetail/File" />
          <errorSourceComponent value="stFile" />
          <pointerPath value="PlaceDetail/File" />
        </ErrorPointerMapItem>
        <ErrorPointerMapItem identity="ErrorPointerMap.69320151074d4125908af3869d7556e1">
          <captionMask value="PlaceDetail/File[${IX_File}]" />
          <errorSourceComponent value="stFile" />
          <pointerPath value="PlaceDetail/File[]" />
        </ErrorPointerMapItem>
        <ErrorPointerMapItem identity="ErrorPointerMap.69320151074d4125908af3869d7556e1">
          <captionMask value="PlaceDetail/File[${IX_File}]/IsFullText" />
          <errorSourceComponent value="cbFile_IsFullText" />
          <pointerPath value="PlaceDetail/File/IsFullText" />
        </ErrorPointerMapItem>
        <ErrorPointerMapItem identity="ErrorPointerMap.69320151074d4125908af3869d7556e1">
          <captionMask value="PlaceDetail/File[${IX_File}]/FileName" />
          <errorSourceComponent value="hlFile_FileName" />
          <pointerPath value="PlaceDetail/File/FileName" />
        </ErrorPointerMapItem>
        <ErrorPointerMapItem identity="ErrorPointerMap.69320151074d4125908af3869d7556e1">
          <captionMask value="PlaceDetail/File[${IX_File}]/FileName" />
          <errorSourceComponent value="lblFile_FileName" />
          <pointerPath value="PlaceDetail/File/FileName" />
        </ErrorPointerMapItem>
        <ErrorPointerMapItem identity="ErrorPointerMap.69320151074d4125908af3869d7556e1">
          <captionMask value="PlaceDetail/File[${IX_File}]/FileType" />
          <errorSourceComponent value="lblFile_FileType" />
          <pointerPath value="PlaceDetail/File/FileType" />
        </ErrorPointerMapItem>
        <ErrorPointerMapItem identity="ErrorPointerMap.69320151074d4125908af3869d7556e1">
          <captionMask value="PlaceDetail/File[${IX_File}]/FileSize" />
          <errorSourceComponent value="lblFile_FileSize" />
          <pointerPath value="PlaceDetail/File/FileSize" />
        </ErrorPointerMapItem>
        <ErrorPointerMapItem identity="ErrorPointerMap.69320151074d4125908af3869d7556e1">
          <captionMask value="PlaceHistory" />
          <errorSourceComponent value="stVersions" />
          <pointerPath value="PlaceHistory" />
        </ErrorPointerMapItem>
        <ErrorPointerMapItem identity="ErrorPointerMap.69320151074d4125908af3869d7556e1">
          <captionMask value="PlaceHistory[${IX_PlaceHistory}]" />
          <errorSourceComponent value="stVersions" />
          <pointerPath value="PlaceHistory[]" />
        </ErrorPointerMapItem>
        <ErrorPointerMapItem identity="ErrorPointerMap.69320151074d4125908af3869d7556e1">
          <captionMask value="PlaceHistory[${IX_PlaceHistory}]/GUID" />
          <errorSourceComponent value="lblVersions_Guid" />
          <pointerPath value="PlaceHistory/GUID" />
        </ErrorPointerMapItem>
        <ErrorPointerMapItem identity="ErrorPointerMap.69320151074d4125908af3869d7556e1">
          <captionMask value="PlaceHistory[${IX_PlaceHistory}]/ValidityStartDate" />
          <errorSourceComponent value="lblVersions_ValidityStartDate" />
          <pointerPath value="PlaceHistory/ValidityStartDate" />
        </ErrorPointerMapItem>
        <ErrorPointerMapItem identity="ErrorPointerMap.69320151074d4125908af3869d7556e1">
          <captionMask value="PlaceHistory[${IX_PlaceHistory}]/ValidityEndDate" />
          <errorSourceComponent value="lblVersions_ValidityEndDate" />
          <pointerPath value="PlaceHistory/ValidityEndDate" />
        </ErrorPointerMapItem>
      </items>
    </ErrorPointerMap>
  </ApiObjects>
</Form>