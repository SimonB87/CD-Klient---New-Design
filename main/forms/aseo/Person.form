<?xml version="1.0" encoding="utf-8"?>
<?data-format version="0.400"?>
<Form>
  <Name value="Person" />
  <Caption value="Person" />
  <Content>
    <Panel>
      <Name value="pnlMain" />
      <Orientation value="Vertical" />
      <Panel.Height value="#" />
      <Panel.Width value="*" />
      <Children>
        <Panel>
          <Name value="pnl_actionBtns" />
          <Orientation value="Horizontal" />
          <Panel.Height value="#" />
          <Panel.Width value="*" />
          <Children>
            <Panel>
              <Name value="pnl_actionBtns_left_parent" />
              <Orientation value="Vertical" />
              <Panel.Height value="#" />
              <Panel.Width value="*" />
              <Children>
                <Panel>
                  <Name value="pnl_actionBtns_left" />
                  <Orientation value="Horizontal" />
                  <Panel.Height value="#" />
                  <Panel.Width value="*" />
                  <Children>
                    <Button>
                      <Name value="btnModify" />
                      <Caption value="Modifikovat" />
                      <Panel.Height value="#" />
                      <Panel.Width value="*" />
                      <OnClick>
                        <ActionEvent ReferencedAction="~handler_btnModify_OnClick" />
                      </OnClick>
                      <Bindings>
                        <Binding SourceProperty="IsVisible" Expression="ui.buttons.btnModify.IsVisible" />
                        <Binding SourceProperty="IsEnabled" Expression="ui.buttons.btnModify.IsEnabled" />
                      </Bindings>
                      <CssClass>
                        <CssClassConditional>
                          <ClassName value="{theme}-button" />
                          <IsThemedStyle value="True" />
                        </CssClassConditional>
                        <CssClassConditional>
                          <ClassName value="cd-header-button" />
                        </CssClassConditional>
                      </CssClass>
                    </Button>
                    <Button>
                      <Name value="btnDelete" />
                      <Caption value="Zrušit" />
                      <Panel.Height value="#" />
                      <Panel.Width value="*" />
                      <OnClick>
                        <ActionEvent ReferencedAction="~handler_btnDelete_OnClick" />
                      </OnClick>
                      <Bindings>
                        <Binding SourceProperty="IsVisible" Expression="ui.buttons.btnDelete.IsVisible" />
                        <Binding SourceProperty="IsEnabled" Expression="ui.buttons.btnDelete.IsEnabled" />
                      </Bindings>
                      <CssClass>
                        <CssClassConditional>
                          <ClassName value="{theme}-button" />
                          <IsThemedStyle value="True" />
                        </CssClassConditional>
                        <CssClassConditional>
                          <ClassName value="cd-header-button" />
                        </CssClassConditional>
                      </CssClass>
                    </Button>
                    <Button>
                      <Name value="btnActionConfirm" />
                      <Panel.Height value="#" />
                      <Panel.Width value="*" />
                      <OnClick>
                        <ActionEvent ReferencedAction="~handler_btnActionConfirm_OnClick" />
                      </OnClick>
                      <Bindings>
                        <Binding SourceProperty="IsEnabled" Expression="ui.buttons.btnActionConfirm.IsEnabled" />
                        <Binding SourceProperty="IsVisible" Expression="ui.buttons.btnActionConfirm.IsVisible" />
                        <Binding SourceProperty="Caption" Expression="ui.buttons.btnActionConfirm.Caption" />
                      </Bindings>
                      <CssClass>
                        <CssClassConditional>
                          <ClassName value="{theme}-button" />
                          <IsThemedStyle value="True" />
                        </CssClassConditional>
                        <CssClassConditional>
                          <ClassName value="cd-header-button" />
                        </CssClassConditional>
                        <CssClassConditional>
                          <ClassName value="btn-alternate" />
                        </CssClassConditional>
                      </CssClass>
                    </Button>
                    <Button>
                      <Name value="btnActionCancel" />
                      <Caption value="Storno" />
                      <Panel.Height value="#" />
                      <Panel.Width value="*" />
                      <OnClick>
                        <ActionEvent ReferencedAction="~handler_buttonActionCancel_OnClick" />
                      </OnClick>
                      <Bindings>
                        <Binding SourceProperty="IsEnabled" Expression="ui.buttons.btnActionCancel.IsEnabled" />
                        <Binding SourceProperty="IsVisible" Expression="ui.buttons.btnActionCancel.IsVisible" />
                      </Bindings>
                      <CssClass>
                        <CssClassConditional>
                          <ClassName value="{theme}-button" />
                          <IsThemedStyle value="True" />
                        </CssClassConditional>
                        <CssClassConditional>
                          <ClassName value="cd-header-button" />
                        </CssClassConditional>
                      </CssClass>
                    </Button>
                    <Button>
                      <Name value="btnActionValidation" />
                      <Caption value="Validace" />
                      <Panel.Height value="#" />
                      <Panel.Width value="*" />
                      <OnClick>
                        <ActionEvent ReferencedAction="~handler_btnActionValidation_OnClick" />
                      </OnClick>
                      <Bindings>
                        <Binding SourceProperty="IsVisible" Expression="ui.buttons.btnActionValidation.IsVisible" />
                        <Binding SourceProperty="IsEnabled" Expression="ui.buttons.btnActionValidation.IsEnabled" />
                      </Bindings>
                      <CssClass>
                        <CssClassConditional>
                          <ClassName value="{theme}-button" />
                          <IsThemedStyle value="True" />
                        </CssClassConditional>
                        <CssClassConditional>
                          <ClassName value="cd-header-button" />
                        </CssClassConditional>
                      </CssClass>
                    </Button>
                  </Children>
                  <CssClass>
                    <CssClassConditional>
                      <ClassName value="{theme}-panel" />
                      <IsThemedStyle value="True" />
                    </CssClassConditional>
                    <CssClassConditional>
                      <ClassName value="width-auto" />
                    </CssClassConditional>
                    <CssClassConditional>
                      <ClassName value="display-flex" />
                    </CssClassConditional>
                    <CssClassConditional>
                      <ClassName value="padding-menuspacer-long" />
                      <Bindings>
                        <Binding SourceProperty="Condition" Expression="not globals.forms.master.showMenu" />
                      </Bindings>
                    </CssClassConditional>
                  </CssClass>
                </Panel>
              </Children>
              <CssClass>
                <CssClassConditional>
                  <ClassName value="{theme}-panel" />
                  <IsThemedStyle value="True" />
                </CssClassConditional>
              </CssClass>
            </Panel>
            <Panel>
              <Name value="pnl_actionBtns_right" />
              <Orientation value="Horizontal" />
              <Panel.Height value="#" />
              <Panel.Width value="*" />
              <Children>
                <Button>
                  <Name value="btnClose" />
                  <Caption value="Zavřít" />
                  <Panel.Height value="#" />
                  <Panel.Width value="*" />
                  <OnClick>
                    <ActionEvent ReferencedAction="~handler_button_close_OnClick" />
                  </OnClick>
                  <CssClass>
                    <CssClassConditional>
                      <ClassName value="{theme}-button" />
                      <IsThemedStyle value="True" />
                    </CssClassConditional>
                    <CssClassConditional>
                      <ClassName value="cd-header-button" />
                    </CssClassConditional>
                  </CssClass>
                </Button>
              </Children>
              <CssClass>
                <CssClassConditional>
                  <ClassName value="{theme}-panel" />
                  <IsThemedStyle value="True" />
                </CssClassConditional>
                <CssClassConditional>
                  <ClassName value="flright" />
                </CssClassConditional>
                <CssClassConditional>
                  <ClassName value="width-auto" />
                </CssClassConditional>
              </CssClass>
            </Panel>
          </Children>
          <CssClass>
            <CssClassConditional>
              <ClassName value="{theme}-panel" />
              <IsThemedStyle value="True" />
            </CssClassConditional>
            <CssClassConditional>
              <ClassName value="{theme}-header" />
              <IsThemedStyle value="True" />
            </CssClassConditional>
            <CssClassConditional>
              <ClassName value="no-border-left" />
            </CssClassConditional>
            <CssClassConditional>
              <ClassName value="{theme}-nav-bar-controls" />
              <IsThemedStyle value="True" />
            </CssClassConditional>
          </CssClass>
        </Panel>
        <CollapsibleGroupBox identity="collapsibleGroupBox.cfca4faa9e574885bad67cbe322167a7">
          <Name value="cgbHeader" />
          <caption value="Hlavička" />
          <collapsedIconClass value="fa fa-plus-square-o" />
          <nonCollapsedIconClass value="fa fa-minus-square-o" />
          <Panel.Height value="#" />
          <Panel.Width value="*" />
          <Content>
            <Panel>
              <Name value="pnlHeader" />
              <Orientation value="Vertical" />
              <Children>
                <Panel>
                  <Name value="pnlHeaderR1" />
                  <Orientation value="Horizontal" />
                  <Panel.Height value="#" />
                  <Panel.Width value="*" />
                  <Children>
                    <TextBox>
                      <Name value="edb_Name" />
                      <Caption value="Jméno" />
                      <CaptionPosition value="Top" />
                      <Panel.Height value="#" />
                      <Panel.Width value="50%" />
                      <Bindings>
                        <Binding SourceProperty="Data" Expression="model.msg.ResponsiblePerson.ResponsiblePersonEvent.FirstName" />
                        <Binding SourceProperty="IsRequiredMarkVisible" Expression="model.msg.ResponsiblePerson.ResponsiblePersonEvent.FirstName.isRequired()" />
                        <Binding SourceProperty="IsEnabled" Expression="isEditOn" />
                      </Bindings>
                      <CssClass>
                        <CssClassConditional>
                          <ClassName value="{theme}-textbox" />
                          <IsThemedStyle value="True" />
                        </CssClassConditional>
                      </CssClass>
                    </TextBox>
                    <TextBox>
                      <Name value="edb_Surname" />
                      <Caption value="Příjmení" />
                      <CaptionPosition value="Top" />
                      <Panel.Height value="#" />
                      <Panel.Width value="50%" />
                      <Bindings>
                        <Binding SourceProperty="Data" Expression="model.msg.ResponsiblePerson.ResponsiblePersonEvent.LastName" />
                        <Binding SourceProperty="IsRequiredMarkVisible" Expression="model.msg.ResponsiblePerson.ResponsiblePersonEvent.LastName.isRequired()" />
                        <Binding SourceProperty="IsEnabled" Expression="isEditOn" />
                      </Bindings>
                      <CssClass>
                        <CssClassConditional>
                          <ClassName value="{theme}-textbox" />
                          <IsThemedStyle value="True" />
                        </CssClassConditional>
                      </CssClass>
                    </TextBox>
                  </Children>
                  <CssClass>
                    <CssClassConditional>
                      <ClassName value="{theme}-panel" />
                      <IsThemedStyle value="True" />
                    </CssClassConditional>
                  </CssClass>
                </Panel>
                <Panel>
                  <Name value="pnlHeaderR2" />
                  <Orientation value="Horizontal" />
                  <Panel.Height value="#" />
                  <Panel.Width value="*" />
                  <Children>
                    <DatePicker>
                      <Name value="dt_Birthday" />
                      <Caption value="Datum narození" />
                      <CaptionPosition value="Top" />
                      <Panel.Height value="#" />
                      <Panel.Width value="50%" />
                      <Bindings>
                        <Binding SourceProperty="Data" Expression="model.msg.ResponsiblePerson.ResponsiblePersonEvent.BirthDate" />
                        <Binding SourceProperty="IsRequiredMarkVisible" Expression="model.msg.ResponsiblePerson.ResponsiblePersonEvent.BirthDate.isRequired()" />
                        <Binding SourceProperty="IsEnabled" Expression="isEditOn" />
                      </Bindings>
                      <CssClass>
                        <CssClassConditional>
                          <ClassName value="{theme}-datepicker" />
                          <IsThemedStyle value="True" />
                        </CssClassConditional>
                      </CssClass>
                    </DatePicker>
                    <ReferenceCombo>
                      <Name value="cbb_Nationality" />
                      <Caption value="Státní příslušnost" />
                      <CaptionPosition value="Top" />
                      <DisplayMember value="_description" />
                      <Panel.Height value="#" />
                      <Panel.Width value="50%" />
                      <ReferenceList reference="~cbb_Nationality_FltCodelist" />
                      <Bindings>
                        <Binding SourceProperty="Data" Expression="model.msg.ResponsiblePerson.ResponsiblePersonEvent.Country" />
                        <Binding SourceProperty="IsRequiredMarkVisible" Expression="model.msg.ResponsiblePerson.ResponsiblePersonEvent.Country.isRequired()" />
                        <Binding SourceProperty="IsEnabled" Expression="isEditOn" />
                      </Bindings>
                      <CssClass>
                        <CssClassConditional>
                          <ClassName value="{theme}-referencecombo" />
                          <IsThemedStyle value="True" />
                        </CssClassConditional>
                      </CssClass>
                    </ReferenceCombo>
                  </Children>
                  <CssClass>
                    <CssClassConditional>
                      <ClassName value="{theme}-panel" />
                      <IsThemedStyle value="True" />
                    </CssClassConditional>
                  </CssClass>
                </Panel>
              </Children>
              <CssClass>
                <CssClassConditional>
                  <ClassName value="{theme}-panel" />
                  <IsThemedStyle value="True" />
                </CssClassConditional>
              </CssClass>
            </Panel>
          </Content>
          <Bindings>
            <Binding SourceProperty="isVisible" Expression="ui.groupBoxes.cgbHeader.IsVisible" />
          </Bindings>
          <conditionalCssClass>
            <CssClassConditional>
              <ClassName value="{theme}-collapsiblegroupbox" />
              <IsThemedStyle value="True" />
            </CssClassConditional>
          </conditionalCssClass>
        </CollapsibleGroupBox>
        <CollapsibleGroupBox identity="collapsibleGroupBox.cfca4faa9e574885bad67cbe322167a7">
          <Name value="cgbClientErrors" />
          <collapsedIconClass value="fa fa-plus-square-o" />
          <nonCollapsedIconClass value="fa fa-minus-square-o" />
          <Panel.Height value="#" />
          <Panel.Width value="*" />
          <Content>
            <ClientValidationSummary identity="ValidationSummary.0f608ab4a81a4349b35a8398ddd72445">
              <Name value="clientValidationSummary" />
              <errorPointerMap reference="~epm" />
              <OnItemClick>
                <ActionEvent ReferencedAction="~handler_clientValidationSummary_OnItemClick" />
              </OnItemClick>
              <Bindings>
                <Binding SourceProperty="validationErrors" Expression="form.error.clientValidationErrors" />
                <Binding SourceProperty="validationRoot" Expression="form.model.msg" />
              </Bindings>
              <columns>
                <validationSummaryColumn identity="ValidationSummary.0f608ab4a81a4349b35a8398ddd72445">
                  <Name value="vscMessage" />
                  <columnCaption value="Zpráva" />
                  <propertyName value="Message" />
                </validationSummaryColumn>
                <validationSummaryColumn identity="ValidationSummary.0f608ab4a81a4349b35a8398ddd72445">
                  <Name value="vscPointer" />
                  <columnCaption value="Místo" />
                  <columnRole value="pointer" />
                  <propertyName value="Pointer" />
                </validationSummaryColumn>
              </columns>
              <conditionalCssClass>
                <CssClassConditional>
                  <ClassName value="{theme}-clientvalidationsummary" />
                  <IsThemedStyle value="True" />
                </CssClassConditional>
              </conditionalCssClass>
            </ClientValidationSummary>
          </Content>
          <Bindings>
            <Binding SourceProperty="isVisible" Expression="ui.groupBoxes.cgbClientErrors.IsVisible" />
            <Binding SourceProperty="caption" Expression="ui.groupBoxes.cgbClientErrors.Caption" />
          </Bindings>
          <conditionalCssClass>
            <CssClassConditional>
              <ClassName value="{theme}-collapsiblegroupbox" />
              <IsThemedStyle value="True" />
            </CssClassConditional>
          </conditionalCssClass>
        </CollapsibleGroupBox>
        <Panel>
          <Name value="pnlBody" />
          <Orientation value="Horizontal" />
          <Panel.Height value="#" />
          <Panel.Width value="*" />
          <Children>
            <CollapsibleGroupBox identity="collapsibleGroupBox.cfca4faa9e574885bad67cbe322167a7">
              <Name value="grpPermanentResidence" />
              <caption value="Trvalé bydliště" />
              <collapsedIconClass value="fa fa-plus-square-o" />
              <nonCollapsedIconClass value="fa fa-minus-square-o" />
              <Panel.Height value="#" />
              <Panel.Width value="*" />
              <Content>
                <Panel>
                  <Name value="grp_Permanent_ResidencePnl" />
                  <Orientation value="Vertical" />
                  <Children>
                    <TextBox>
                      <Name value="edb_StreetAndNr" />
                      <Caption value="Ulice a č.p." />
                      <CaptionPosition value="Top" />
                      <Panel.Height value="#" />
                      <Panel.Width value="*" />
                      <Bindings>
                        <Binding SourceProperty="Data" Expression="model.msg.ResponsiblePerson.ResponsiblePersonEvent.StreetAndNr" />
                        <Binding SourceProperty="IsRequiredMarkVisible" Expression="model.msg.ResponsiblePerson.ResponsiblePersonEvent.StreetAndNr.isRequired()" />
                        <Binding SourceProperty="IsEnabled" Expression="isEditOn" />
                      </Bindings>
                      <CssClass>
                        <CssClassConditional>
                          <ClassName value="{theme}-textbox" />
                          <IsThemedStyle value="True" />
                        </CssClassConditional>
                      </CssClass>
                    </TextBox>
                    <TextBox>
                      <Name value="edb_PostCode" />
                      <Caption value="PSČ" />
                      <CaptionPosition value="Top" />
                      <Panel.Height value="#" />
                      <Panel.Width value="*" />
                      <Bindings>
                        <Binding SourceProperty="Data" Expression="model.msg.ResponsiblePerson.ResponsiblePersonEvent.PostCode" />
                        <Binding SourceProperty="IsRequiredMarkVisible" Expression="model.msg.ResponsiblePerson.ResponsiblePersonEvent.PostCode.isRequired()" />
                        <Binding SourceProperty="IsEnabled" Expression="isEditOn" />
                      </Bindings>
                      <CssClass>
                        <CssClassConditional>
                          <ClassName value="{theme}-textbox" />
                          <IsThemedStyle value="True" />
                        </CssClassConditional>
                      </CssClass>
                    </TextBox>
                    <TextBox>
                      <Name value="edb_Municipality" />
                      <Caption value="Obec" />
                      <CaptionPosition value="Top" />
                      <Panel.Height value="#" />
                      <Panel.Width value="*" />
                      <Bindings>
                        <Binding SourceProperty="Data" Expression="model.msg.ResponsiblePerson.ResponsiblePersonEvent.City" />
                        <Binding SourceProperty="IsRequiredMarkVisible" Expression="model.msg.ResponsiblePerson.ResponsiblePersonEvent.City.isRequired()" />
                        <Binding SourceProperty="IsEnabled" Expression="isEditOn" />
                      </Bindings>
                      <CssClass>
                        <CssClassConditional>
                          <ClassName value="{theme}-textbox" />
                          <IsThemedStyle value="True" />
                        </CssClassConditional>
                      </CssClass>
                    </TextBox>
                  </Children>
                  <CssClass>
                    <CssClassConditional>
                      <ClassName value="{theme}-panel" />
                      <IsThemedStyle value="True" />
                    </CssClassConditional>
                  </CssClass>
                </Panel>
              </Content>
              <Bindings>
                <Binding SourceProperty="isVisible" Expression="ui.groupBoxes.grpPermanentResidence.IsVisible" />
              </Bindings>
              <conditionalCssClass>
                <CssClassConditional>
                  <ClassName value="{theme}-collapsiblegroupbox" />
                  <IsThemedStyle value="True" />
                </CssClassConditional>
              </conditionalCssClass>
            </CollapsibleGroupBox>
            <CollapsibleGroupBox identity="collapsibleGroupBox.cfca4faa9e574885bad67cbe322167a7">
              <Name value="grpContact" />
              <caption value="Kontaktní údaje" />
              <collapsedIconClass value="fa fa-plus-square-o" />
              <nonCollapsedIconClass value="fa fa-minus-square-o" />
              <Panel.Height value="#" />
              <Panel.Width value="*" />
              <Content>
                <Panel>
                  <Name value="grp_ContactPnl" />
                  <Orientation value="Vertical" />
                  <Children>
                    <TextBox>
                      <Name value="edb_Phone" />
                      <Caption value="Telefon" />
                      <CaptionPosition value="Top" />
                      <Panel.Height value="#" />
                      <Panel.Width value="*" />
                      <Bindings>
                        <Binding SourceProperty="Data" Expression="model.msg.ResponsiblePerson.ResponsiblePersonEvent.Phone" />
                        <Binding SourceProperty="IsRequiredMarkVisible" Expression="model.msg.ResponsiblePerson.ResponsiblePersonEvent.Phone.isRequired()" />
                        <Binding SourceProperty="IsEnabled" Expression="isEditOn" />
                      </Bindings>
                      <CssClass>
                        <CssClassConditional>
                          <ClassName value="{theme}-textbox" />
                          <IsThemedStyle value="True" />
                        </CssClassConditional>
                      </CssClass>
                    </TextBox>
                    <TextBox>
                      <Name value="edb_MobilePhone" />
                      <Caption value="Mobilní telefon" />
                      <CaptionPosition value="Top" />
                      <Panel.Height value="#" />
                      <Panel.Width value="*" />
                      <Bindings>
                        <Binding SourceProperty="Data" Expression="model.msg.ResponsiblePerson.ResponsiblePersonEvent.CellPhone" />
                        <Binding SourceProperty="IsRequiredMarkVisible" Expression="model.msg.ResponsiblePerson.ResponsiblePersonEvent.CellPhone.isRequired()" />
                        <Binding SourceProperty="IsEnabled" Expression="isEditOn" />
                      </Bindings>
                      <CssClass>
                        <CssClassConditional>
                          <ClassName value="{theme}-textbox" />
                          <IsThemedStyle value="True" />
                        </CssClassConditional>
                      </CssClass>
                    </TextBox>
                    <TextBox>
                      <Name value="edb_Email" />
                      <Caption value="E-mail" />
                      <CaptionPosition value="Top" />
                      <Panel.Height value="#" />
                      <Panel.Width value="*" />
                      <Bindings>
                        <Binding SourceProperty="Data" Expression="model.msg.ResponsiblePerson.ResponsiblePersonEvent.EMail" />
                        <Binding SourceProperty="IsRequiredMarkVisible" Expression="model.msg.ResponsiblePerson.ResponsiblePersonEvent.EMail.isRequired()" />
                        <Binding SourceProperty="IsEnabled" Expression="isEditOn" />
                      </Bindings>
                      <CssClass>
                        <CssClassConditional>
                          <ClassName value="{theme}-textbox" />
                          <IsThemedStyle value="True" />
                        </CssClassConditional>
                      </CssClass>
                    </TextBox>
                  </Children>
                  <CssClass>
                    <CssClassConditional>
                      <ClassName value="{theme}-panel" />
                      <IsThemedStyle value="True" />
                    </CssClassConditional>
                  </CssClass>
                </Panel>
              </Content>
              <Bindings>
                <Binding SourceProperty="isVisible" Expression="ui.groupBoxes.grpContact.IsVisible" />
              </Bindings>
              <conditionalCssClass>
                <CssClassConditional>
                  <ClassName value="{theme}-collapsiblegroupbox" />
                  <IsThemedStyle value="True" />
                </CssClassConditional>
              </conditionalCssClass>
            </CollapsibleGroupBox>
            <CollapsibleGroupBox identity="collapsibleGroupBox.cfca4faa9e574885bad67cbe322167a7">
              <Name value="grpOther" />
              <caption value="Ostatní" />
              <collapsedIconClass value="fa fa-plus-square-o" />
              <nonCollapsedIconClass value="fa fa-minus-square-o" />
              <Panel.Height value="#" />
              <Panel.Width value="*" />
              <Content>
                <Panel>
                  <Name value="grpOtherPnl" />
                  <Orientation value="Vertical" />
                  <Children>
                    <TextBox>
                      <Name value="edb_Other" />
                      <Caption value="edb_Other" />
                      <CaptionPosition value="Hide" />
                      <InputType value="Multiline" />
                      <Panel.Height value="#" />
                      <Panel.Width value="*" />
                      <Rows value="5" />
                      <Bindings>
                        <Binding SourceProperty="Data" Expression="model.msg.ResponsiblePerson.ResponsiblePersonEvent.Information" />
                        <Binding SourceProperty="IsRequiredMarkVisible" Expression="model.msg.ResponsiblePerson.ResponsiblePersonEvent.Information.isRequired()" />
                        <Binding SourceProperty="IsEnabled" Expression="isEditOn" />
                      </Bindings>
                      <CssClass>
                        <CssClassConditional>
                          <ClassName value="{theme}-textbox" />
                          <IsThemedStyle value="True" />
                        </CssClassConditional>
                      </CssClass>
                    </TextBox>
                  </Children>
                  <CssClass>
                    <CssClassConditional>
                      <ClassName value="{theme}-panel" />
                      <IsThemedStyle value="True" />
                    </CssClassConditional>
                  </CssClass>
                </Panel>
              </Content>
              <Bindings>
                <Binding SourceProperty="isVisible" Expression="ui.groupBoxes.grpOther.IsVisible" />
              </Bindings>
              <conditionalCssClass>
                <CssClassConditional>
                  <ClassName value="{theme}-collapsiblegroupbox" />
                  <IsThemedStyle value="True" />
                </CssClassConditional>
              </conditionalCssClass>
            </CollapsibleGroupBox>
            <CollapsibleGroupBox identity="collapsibleGroupBox.cfca4faa9e574885bad67cbe322167a7">
              <Name value="cgbPersonControl" />
              <caption value="Prověření osoby" />
              <collapsedIconClass value="fa fa-plus-square-o" />
              <nonCollapsedIconClass value="fa fa-minus-square-o" />
              <Panel.Height value="#" />
              <Panel.Width value="*" />
              <Content>
                <SelectionTable identity="SelectionTable.cc32b616f4094d929bc32891cf024bb9">
                  <Name value="stPersonControl" />
                  <Bindings>
                    <Binding SourceProperty="Data" Expression="model.msg.ResponsiblePerson.ResponsiblePersonCheck" />
                    <Binding SourceProperty="Index" Expression="ui.tables.stPersonControl.Index" />
                  </Bindings>
                  <Columns>
                    <SelectionTableColumn identity="SelectionTable.cc32b616f4094d929bc32891cf024bb9">
                      <Name value="edb_GUIDCol" />
                      <Caption value="edb_GUID" />
                      <IsVisible value="False" />
                      <Content>
                        <TextBox>
                          <Name value="edb_GUID" />
                          <CaptionPosition value="Hide" />
                          <IsEnabled value="False" />
                          <Bindings>
                            <Binding SourceProperty="Data" Expression="GUID" />
                            <Binding SourceProperty="IsRequiredMarkVisible" Expression="GUID.isRequired()" />
                            <Binding SourceProperty="Caption" Expression="GUID.caption()" />
                          </Bindings>
                          <CssClass>
                            <CssClassConditional>
                              <ClassName value="{theme}-textbox" />
                              <IsThemedStyle value="True" />
                            </CssClassConditional>
                          </CssClass>
                        </TextBox>
                      </Content>
                    </SelectionTableColumn>
                    <SelectionTableColumn identity="SelectionTable.cc32b616f4094d929bc32891cf024bb9">
                      <Name value="dt_DateOfControlCol" />
                      <Caption value="Datum prověření" />
                      <Content>
                        <DatePicker>
                          <Name value="dt_DateOfControl" />
                          <CaptionPosition value="Hide" />
                          <Bindings>
                            <Binding SourceProperty="Data" Expression="CheckDate" />
                            <Binding SourceProperty="IsRequiredMarkVisible" Expression="CheckDate.isRequired()" />
                            <Binding SourceProperty="Caption" Expression="CheckDate.caption()" />
                          </Bindings>
                          <CssClass>
                            <CssClassConditional>
                              <ClassName value="{theme}-datepicker" />
                              <IsThemedStyle value="True" />
                            </CssClassConditional>
                          </CssClass>
                        </DatePicker>
                      </Content>
                    </SelectionTableColumn>
                    <SelectionTableColumn identity="SelectionTable.cc32b616f4094d929bc32891cf024bb9">
                      <Name value="chb_ViolationDiscoveredCol" />
                      <Caption value="Zjištěno porušení" />
                      <Content>
                        <CheckBox>
                          <Name value="chb_ViolationDiscovered" />
                          <CaptionPosition value="Hide" />
                          <Bindings>
                            <Binding SourceProperty="Data" Expression="CheckResult" />
                            <Binding SourceProperty="IsRequiredMarkVisible" Expression="CheckResult.isRequired()" />
                            <Binding SourceProperty="Caption" Expression="CheckResult.caption()" />
                          </Bindings>
                        </CheckBox>
                      </Content>
                    </SelectionTableColumn>
                    <SelectionTableColumn identity="SelectionTable.cc32b616f4094d929bc32891cf024bb9">
                      <Name value="edb_FileNameCol" />
                      <Caption value="Název souboru" />
                      <Content>
                        <TextBox>
                          <Name value="edb_FileName" />
                          <CaptionPosition value="Hide" />
                          <IsEnabled value="False" />
                          <Bindings>
                            <Binding SourceProperty="Data" Expression="FileName" />
                            <Binding SourceProperty="IsRequiredMarkVisible" Expression="FileName.isRequired()" />
                            <Binding SourceProperty="Caption" Expression="FileName.caption()" />
                          </Bindings>
                          <CssClass>
                            <CssClassConditional>
                              <ClassName value="{theme}-textbox" />
                              <IsThemedStyle value="True" />
                            </CssClassConditional>
                          </CssClass>
                        </TextBox>
                      </Content>
                    </SelectionTableColumn>
                    <SelectionTableColumn identity="SelectionTable.cc32b616f4094d929bc32891cf024bb9">
                      <Name value="edb_DecidingCustomsOffice_tbl_PCCol" />
                      <Caption value="Celní úřad zapisující" />
                      <Content>
                        <TextBox>
                          <Name value="edb_DecidingCustomsOffice_tbl_PC" />
                          <CaptionPosition value="Hide" />
                          <IsEnabled value="False" />
                          <Bindings>
                            <Binding SourceProperty="Data" Expression="RecordingCustomsOffice" />
                            <Binding SourceProperty="IsRequiredMarkVisible" Expression="RecordingCustomsOffice.isRequired()" />
                            <Binding SourceProperty="Caption" Expression="RecordingCustomsOffice.caption()" />
                          </Bindings>
                          <CssClass>
                            <CssClassConditional>
                              <ClassName value="{theme}-textbox" />
                              <IsThemedStyle value="True" />
                            </CssClassConditional>
                          </CssClass>
                        </TextBox>
                      </Content>
                    </SelectionTableColumn>
                    <SelectionTableColumn identity="SelectionTable.cc32b616f4094d929bc32891cf024bb9">
                      <Name value="edb_DecidingPerson_tbl_PCCol" />
                      <Caption value="Osobní číslo uživatele" />
                      <Content>
                        <TextBox>
                          <Name value="edb_DecidingPerson_tbl_PC" />
                          <CaptionPosition value="Hide" />
                          <IsEnabled value="False" />
                          <Bindings>
                            <Binding SourceProperty="Data" Expression="RecordingPerson" />
                            <Binding SourceProperty="IsRequiredMarkVisible" Expression="RecordingPerson.isRequired()" />
                            <Binding SourceProperty="Caption" Expression="RecordingPerson.caption()" />
                          </Bindings>
                          <CssClass>
                            <CssClassConditional>
                              <ClassName value="{theme}-textbox" />
                              <IsThemedStyle value="True" />
                            </CssClassConditional>
                          </CssClass>
                        </TextBox>
                      </Content>
                    </SelectionTableColumn>
                  </Columns>
                  <CssClass>
                    <CssClassConditional>
                      <ClassName value="{theme}-selectiontable" />
                      <IsThemedStyle value="True" />
                    </CssClassConditional>
                  </CssClass>
                </SelectionTable>
              </Content>
              <Bindings>
                <Binding SourceProperty="isVisible" Expression="ui.groupBoxes.cgbPersonControl.IsVisible" />
              </Bindings>
              <conditionalCssClass>
                <CssClassConditional>
                  <ClassName value="{theme}-collapsiblegroupbox" />
                  <IsThemedStyle value="True" />
                </CssClassConditional>
              </conditionalCssClass>
            </CollapsibleGroupBox>
          </Children>
          <CssClass>
            <CssClassConditional>
              <ClassName value="{theme}-panel" />
              <IsThemedStyle value="True" />
            </CssClassConditional>
            <CssClassConditional>
              <ClassName value="{theme}-panel-uniform" />
              <IsThemedStyle value="True" />
            </CssClassConditional>
            <CssClassConditional>
              <ClassName value="display-flex" />
            </CssClassConditional>
          </CssClass>
        </Panel>
        <CollapsibleGroupBox identity="collapsibleGroupBox.cfca4faa9e574885bad67cbe322167a7">
          <Name value="cgbVersions" />
          <caption value="Historie stavů/verzí" />
          <collapsedIconClass value="fa fa-plus-square-o" />
          <isExpanded value="False" />
          <nonCollapsedIconClass value="fa fa-minus-square-o" />
          <Panel.Height value="#" />
          <Panel.Width value="*" />
          <Content>
            <SelectionTable identity="SelectionTable.cc32b616f4094d929bc32891cf024bb9">
              <Name value="stVersions" />
              <IsScrollable value="True" />
              <MaxHeight value="230px" />
              <OnRowClick>
                <ActionEvent ReferencedAction="~handler_stVersions_OnRowClick" />
              </OnRowClick>
              <Bindings>
                <Binding SourceProperty="Data" Expression="model.msg.ResponsiblePerson.ResponsiblePersonHistory" />
                <Binding SourceProperty="Index" Expression="ui.tables.stVersions.Index" />
                <Binding SourceProperty="SelectionEnabled" Expression="ui.tables.stVersions.SelectionEnabled" />
              </Bindings>
              <Columns>
                <SelectionTableColumn identity="SelectionTable.cc32b616f4094d929bc32891cf024bb9">
                  <Name value="stcVersions_Guid" />
                  <Caption value=" " />
                  <IsVisible value="False" />
                  <Content>
                    <Label>
                      <Name value="lblVersions_Guid" />
                      <IsVisible value="False" />
                      <Bindings>
                        <Binding SourceProperty="Data" Expression="GUID" />
                      </Bindings>
                      <CssClass>
                        <CssClassConditional>
                          <ClassName value="{theme}-label" />
                          <IsThemedStyle value="True" />
                        </CssClassConditional>
                      </CssClass>
                    </Label>
                  </Content>
                </SelectionTableColumn>
                <SelectionTableColumn identity="SelectionTable.cc32b616f4094d929bc32891cf024bb9">
                  <Name value="stcVersions_ValidityStartDate" />
                  <Caption value="Datum zápisu do aplikace" />
                  <Content>
                    <Label>
                      <Name value="lblVersions_ValidityStartDate" />
                      <Bindings>
                        <Binding SourceProperty="Data" Expression="ValidityStartDate" />
                      </Bindings>
                      <CssClass>
                        <CssClassConditional>
                          <ClassName value="{theme}-label" />
                          <IsThemedStyle value="True" />
                        </CssClassConditional>
                      </CssClass>
                    </Label>
                  </Content>
                </SelectionTableColumn>
                <SelectionTableColumn identity="SelectionTable.cc32b616f4094d929bc32891cf024bb9">
                  <Name value="stcVersions_RecordingCustomsOffice" />
                  <Caption value="Celní úřad zapisující" />
                  <Content>
                    <Label>
                      <Name value="lblVersions_RecordingCustomsOffice" />
                      <Bindings>
                        <Binding SourceProperty="Data" Expression="RecordingCustomsOffice" />
                      </Bindings>
                      <CssClass>
                        <CssClassConditional>
                          <ClassName value="{theme}-label" />
                          <IsThemedStyle value="True" />
                        </CssClassConditional>
                      </CssClass>
                    </Label>
                  </Content>
                </SelectionTableColumn>
                <SelectionTableColumn identity="SelectionTable.cc32b616f4094d929bc32891cf024bb9">
                  <Name value="stcVersions_RecordingPerson" />
                  <Caption value="Osobní číslo uživatele" />
                  <Content>
                    <Label>
                      <Name value="lblVersions_RecordingPerson" />
                      <Bindings>
                        <Binding SourceProperty="Data" Expression="RecordingPerson" />
                      </Bindings>
                      <CssClass>
                        <CssClassConditional>
                          <ClassName value="{theme}-label" />
                          <IsThemedStyle value="True" />
                        </CssClassConditional>
                      </CssClass>
                    </Label>
                  </Content>
                </SelectionTableColumn>
                <SelectionTableColumn identity="SelectionTable.cc32b616f4094d929bc32891cf024bb9">
                  <Name value="stcVersions_RecordingPersonName" />
                  <Caption value="Jméno pracovníka" />
                  <Content>
                    <Label>
                      <Name value="lblVersions_RecordingPersonName" />
                      <Bindings>
                        <Binding SourceProperty="Data" Expression="RecordingPersonName" />
                      </Bindings>
                      <CssClass>
                        <CssClassConditional>
                          <ClassName value="{theme}-label" />
                          <IsThemedStyle value="True" />
                        </CssClassConditional>
                      </CssClass>
                    </Label>
                  </Content>
                </SelectionTableColumn>
              </Columns>
              <CssClass>
                <CssClassConditional>
                  <ClassName value="{theme}-selectiontable" />
                  <IsThemedStyle value="True" />
                </CssClassConditional>
                <CssClassConditional>
                  <ClassName value="clickable-rows" />
                </CssClassConditional>
                <CssClassConditional>
                  <ClassName value="selected-bold" />
                </CssClassConditional>
              </CssClass>
            </SelectionTable>
          </Content>
          <conditionalCssClass>
            <CssClassConditional>
              <ClassName value="{theme}-collapsiblegroupbox" />
              <IsThemedStyle value="True" />
            </CssClassConditional>
          </conditionalCssClass>
        </CollapsibleGroupBox>
      </Children>
      <CssClass>
        <CssClassConditional>
          <ClassName value="{theme}-panel" />
          <IsThemedStyle value="True" />
        </CssClassConditional>
        <CssClassConditional>
          <ClassName value="form-container" />
        </CssClassConditional>
      </CssClass>
    </Panel>
  </Content>
  <DataContext>
    <DataContext>
      <Children>
        <Attribute>
          <Name value="action" />
          <Caption value="Action" />
          <MetaType reference="+MetaTypes.ActionPerson" />
        </Attribute>
        <Computed>
          <Name value="isEditOn" />
          <Caption value="Is edit on" />
          <Expression IsValid="True">
            <ExpressionText><![CDATA[globals.user.hasWritePermission and
isFalse(action in [enums.ActionPerson.NONE, enums.ActionPerson.Delete])]]></ExpressionText>
            <ResultType>
              <BaseType value="Bool" />
            </ResultType>
          </Expression>
        </Computed>
        <Computed>
          <Name value="state" />
          <Caption value="State" />
          <Expression IsValid="True">
            <ExpressionText><![CDATA[enums.StatePerson.toValue(form.model.msg.ResponsiblePerson.State, enums.StatePerson.NONE)]]></ExpressionText>
            <ResultType>
              <BaseType value="Enum" />
              <MetaType reference="+MetaTypes.StatePerson" />
            </ResultType>
          </Expression>
        </Computed>
        <Complex>
          <Name value="params" />
          <Caption value="Params" />
          <Children>
            <Include>
              <Include reference="+DataEntities.Person_params" />
            </Include>
          </Children>
        </Complex>
        <Complex>
          <Name value="model" />
          <Caption value="Model" />
          <Children>
            <Complex>
              <Name value="msg" />
              <Caption value="Msg" />
              <Children>
                <Include>
                  <Include reference="+DataEntities.ASEOPersonDataResponseEx" />
                </Include>
              </Children>
            </Complex>
            <Complex>
              <Name value="onNodeActivated" />
              <Caption value="On node activated" />
              <Children>
                <Include>
                  <Include reference="+DataEntities.onNodeActivatedEvent" />
                </Include>
              </Children>
            </Complex>
          </Children>
        </Complex>
        <Complex>
          <Name value="ui" />
          <Caption value="Ui" />
          <Children>
            <Complex>
              <Name value="navTree" />
              <Caption value="Nav tree" />
              <Children>
                <Attribute>
                  <Name value="selectedNode" />
                  <Caption value="Selected node" />
                  <Description value="vybrany node z navTree" />
                  <DeclaredType>
                    <AttributeType />
                  </DeclaredType>
                </Attribute>
              </Children>
            </Complex>
            <Complex>
              <Name value="groupBoxes" />
              <Caption value="Group boxes" />
              <Children>
                <Complex>
                  <Name value="cgbHeader" />
                  <Caption value="Cgb header" />
                  <Children>
                    <Computed>
                      <Name value="IsVisible" />
                      <Caption value="Is visible" />
                      <Expression IsValid="True">
                        <ExpressionText><![CDATA[true]]></ExpressionText>
                        <ResultType>
                          <BaseType value="Bool" />
                        </ResultType>
                      </Expression>
                    </Computed>
                  </Children>
                </Complex>
                <Complex>
                  <Name value="cgbClientErrors" />
                  <Caption value="cgbClientErrors" />
                  <Children>
                    <Attribute>
                      <Name value="_IsVisible" />
                      <Caption value="_ is visible" />
                      <DeclaredType>
                        <AttributeType>
                          <BaseType value="Bool" />
                        </AttributeType>
                      </DeclaredType>
                    </Attribute>
                    <Computed>
                      <Name value="IsVisible" />
                      <Caption value="IsVisible" />
                      <Expression IsValid="True">
                        <ExpressionText><![CDATA[isTrue(_IsVisible) and
isTrue(form.action <> enums.ActionPerson.NONE) and
isTrue(form.model.validationErrorsCount() > 0)]]></ExpressionText>
                        <ResultType>
                          <BaseType value="Bool" />
                        </ResultType>
                      </Expression>
                    </Computed>
                    <Computed>
                      <Name value="Caption" />
                      <Caption value="Caption" />
                      <Expression IsValid="True">
                        <ExpressionText><![CDATA[stringFormat("Chyby - klient{0}", 
  form.error.clientValidationErrors.count() > 0 ?
  " (" + toString(form.error.clientValidationErrors.count()) + ")" : 
  "" 
)]]></ExpressionText>
                        <ResultType>
                          <BaseType value="String" />
                        </ResultType>
                      </Expression>
                    </Computed>
                  </Children>
                </Complex>
                <Complex>
                  <Name value="grpPermanentResidence" />
                  <Caption value="grpPermanentResidence" />
                  <Children>
                    <Computed>
                      <Name value="IsVisible" />
                      <Caption value="Is visible" />
                      <Expression IsValid="True">
                        <ExpressionText><![CDATA[form.ui.navTree.selectedNode in ["All", "Detail"]]]></ExpressionText>
                        <ResultType>
                          <BaseType value="Bool" />
                        </ResultType>
                      </Expression>
                    </Computed>
                  </Children>
                </Complex>
                <Complex>
                  <Name value="grpContact" />
                  <Caption value="grpContact" />
                  <Children>
                    <Computed>
                      <Name value="IsVisible" />
                      <Caption value="Is visible" />
                      <Expression IsValid="True">
                        <ExpressionText><![CDATA[form.ui.navTree.selectedNode in ["All", "Detail"]]]></ExpressionText>
                        <ResultType>
                          <BaseType value="Bool" />
                        </ResultType>
                      </Expression>
                    </Computed>
                  </Children>
                </Complex>
                <Complex>
                  <Name value="grpOther" />
                  <Caption value="grpOther" />
                  <Children>
                    <Computed>
                      <Name value="IsVisible" />
                      <Caption value="Is visible" />
                      <Expression IsValid="True">
                        <ExpressionText><![CDATA[form.ui.navTree.selectedNode in ["All", "Detail"]]]></ExpressionText>
                        <ResultType>
                          <BaseType value="Bool" />
                        </ResultType>
                      </Expression>
                    </Computed>
                  </Children>
                </Complex>
                <Complex>
                  <Name value="cgbPersonControl" />
                  <Caption value="cgbPersonControl" />
                  <Children>
                    <Computed>
                      <Name value="IsVisible" />
                      <Caption value="Is visible" />
                      <Expression IsValid="True">
                        <ExpressionText><![CDATA[form.ui.navTree.selectedNode in ["All", "Check"]]]></ExpressionText>
                        <ResultType>
                          <BaseType value="Bool" />
                        </ResultType>
                      </Expression>
                    </Computed>
                  </Children>
                </Complex>
              </Children>
            </Complex>
            <Complex>
              <Name value="tables" />
              <Caption value="Tables" />
              <Children>
                <Complex>
                  <Name value="stVersions" />
                  <Caption value="St versions" />
                  <Children>
                    <Attribute>
                      <Name value="Index" />
                      <Caption value="Index" />
                      <DeclaredType>
                        <AttributeType>
                          <BaseType value="Integer" />
                        </AttributeType>
                      </DeclaredType>
                      <OnUserChange>
                        <ActionEvent ReferencedAction="+UiParts.Person.handler_Index_OnUserChange" />
                      </OnUserChange>
                    </Attribute>
                    <Computed>
                      <Name value="SelectionEnabled" />
                      <Caption value="Selection enabled" />
                      <Expression IsValid="True">
                        <ExpressionText><![CDATA[true]]></ExpressionText>
                        <ResultType>
                          <BaseType value="Bool" />
                        </ResultType>
                      </Expression>
                    </Computed>
                  </Children>
                </Complex>
                <Complex>
                  <Name value="stPersonControl" />
                  <Caption value="stPersonControl" />
                  <Children>
                    <Attribute>
                      <Name value="Index" />
                      <Caption value="Index" />
                      <DeclaredType>
                        <AttributeType>
                          <BaseType value="Integer" />
                        </AttributeType>
                      </DeclaredType>
                    </Attribute>
                  </Children>
                </Complex>
              </Children>
            </Complex>
            <Complex>
              <Name value="buttons" />
              <Caption value="Buttons" />
              <Children>
                <Computed>
                  <Name value="showActionButtons" />
                  <Caption value="Show action buttons" />
                  <Expression IsValid="True">
                    <ExpressionText><![CDATA[isTrue(form.ui.tables.stVersions.Index = 1) and
isTrue(form.state <> enums.StatePerson.DP) and
isTrue(form.action = enums.ActionPerson.NONE)]]></ExpressionText>
                    <ResultType>
                      <BaseType value="Bool" />
                    </ResultType>
                  </Expression>
                </Computed>
                <Complex>
                  <Name value="btnModify" />
                  <Caption value="btnModify" />
                  <Children>
                    <Computed>
                      <Name value="IsVisible" />
                      <Caption value="IsVisible" />
                      <Expression IsValid="True">
                        <ExpressionText><![CDATA[this.owner().showActionButtons]]></ExpressionText>
                        <ResultType>
                          <BaseType value="Bool" />
                        </ResultType>
                      </Expression>
                    </Computed>
                    <Computed>
                      <Name value="IsEnabled" />
                      <Caption value="IsEnabled" />
                      <Expression IsValid="True">
                        <ExpressionText><![CDATA[globals.user.hasWritePermission]]></ExpressionText>
                        <ResultType>
                          <BaseType value="Bool" />
                        </ResultType>
                      </Expression>
                    </Computed>
                  </Children>
                </Complex>
                <Complex>
                  <Name value="btnDelete" />
                  <Caption value="btnDelete" />
                  <Children>
                    <Computed>
                      <Name value="IsVisible" />
                      <Caption value="IsVisible" />
                      <Expression IsValid="True">
                        <ExpressionText><![CDATA[this.owner().showActionButtons]]></ExpressionText>
                        <ResultType>
                          <BaseType value="Bool" />
                        </ResultType>
                      </Expression>
                    </Computed>
                    <Computed>
                      <Name value="IsEnabled" />
                      <Caption value="IsEnabled" />
                      <Expression IsValid="True">
                        <ExpressionText><![CDATA[globals.user.hasWritePermission]]></ExpressionText>
                        <ResultType>
                          <BaseType value="Bool" />
                        </ResultType>
                      </Expression>
                    </Computed>
                  </Children>
                </Complex>
                <Complex>
                  <Name value="btnActionConfirm" />
                  <Caption value="buttonProceedActionConfirm" />
                  <Children>
                    <Computed>
                      <Name value="IsVisible" />
                      <Caption value="IsVisible" />
                      <Expression IsValid="True">
                        <ExpressionText><![CDATA[isTrue(form.action <> enums.ActionPerson.NONE)]]></ExpressionText>
                        <ResultType>
                          <BaseType value="Bool" />
                        </ResultType>
                      </Expression>
                    </Computed>
                    <Computed>
                      <Name value="IsEnabled" />
                      <Caption value="IsEnabled" />
                      <Expression IsValid="True">
                        <ExpressionText><![CDATA[isTrue(form.action <> enums.ActionPerson.NONE)]]></ExpressionText>
                        <ResultType>
                          <BaseType value="Bool" />
                        </ResultType>
                      </Expression>
                    </Computed>
                    <Computed>
                      <Name value="Caption" />
                      <Caption value="Caption" />
                      <Expression IsValid="True">
                        <ExpressionText><![CDATA[form.action.enumCaption()]]></ExpressionText>
                        <ResultType>
                          <BaseType value="String" />
                        </ResultType>
                      </Expression>
                    </Computed>
                  </Children>
                </Complex>
                <Complex>
                  <Name value="btnActionCancel" />
                  <Caption value="buttonActionCancel" />
                  <Children>
                    <Computed>
                      <Name value="IsVisible" />
                      <Caption value="IsVisible" />
                      <Expression IsValid="True">
                        <ExpressionText><![CDATA[isFalse(form.action in [enums.ActionPerson.NONE, enums.ActionPerson.New])]]></ExpressionText>
                        <ResultType>
                          <BaseType value="Bool" />
                        </ResultType>
                      </Expression>
                    </Computed>
                    <Computed>
                      <Name value="IsEnabled" />
                      <Caption value="IsEnabled" />
                      <Expression IsValid="True">
                        <ExpressionText><![CDATA[isTrue(form.action <> enums.ActionPerson.NONE)]]></ExpressionText>
                        <ResultType>
                          <BaseType value="Bool" />
                        </ResultType>
                      </Expression>
                    </Computed>
                  </Children>
                </Complex>
                <Complex>
                  <Name value="btnActionValidation" />
                  <Caption value="btnActionValidation" />
                  <Children>
                    <Computed>
                      <Name value="IsVisible" />
                      <Caption value="IsVisible" />
                      <Expression IsValid="True">
                        <ExpressionText><![CDATA[isFalse(form.action in [enums.ActionPerson.NONE, enums.ActionPerson.Delete])]]></ExpressionText>
                        <ResultType>
                          <BaseType value="Bool" />
                        </ResultType>
                      </Expression>
                    </Computed>
                    <Computed>
                      <Name value="IsEnabled" />
                      <Caption value="IsEnabled" />
                      <Expression IsValid="True">
                        <ExpressionText><![CDATA[form.isEditOn]]></ExpressionText>
                        <ResultType>
                          <BaseType value="Bool" />
                        </ResultType>
                      </Expression>
                    </Computed>
                  </Children>
                </Complex>
              </Children>
            </Complex>
          </Children>
        </Complex>
        <Complex>
          <Name value="error" />
          <Caption value="Error" />
          <Children>
            <Collection>
              <Name value="clientValidationErrors" />
              <Caption value="Client validation errors" />
              <Children>
                <Attribute>
                  <Name value="Message" />
                  <Caption value="Message" />
                  <DeclaredType>
                    <AttributeType />
                  </DeclaredType>
                </Attribute>
                <Attribute>
                  <Name value="Pointer" />
                  <Caption value="Pointer" />
                  <DeclaredType>
                    <AttributeType />
                  </DeclaredType>
                </Attribute>
                <Attribute>
                  <Name value="Type" />
                  <Caption value="Type" />
                  <DeclaredType>
                    <AttributeType />
                  </DeclaredType>
                </Attribute>
              </Children>
            </Collection>
          </Children>
        </Complex>
      </Children>
      <Modifiers>
        <Modifier>
          <Name value="modifier_EAC70038_ValidityStartDate" />
          <ShowAsChanges value="True" />
          <SourcePath value="model.msg.ResponsiblePerson.ResponsiblePersonEvent.ValidityStartDate" />
          <OnChange>
            <ActionEvent ReferencedAction="+UiParts.Person.handler_modifier_EAC70038_ValidityStartDate_OnChange" />
          </OnChange>
        </Modifier>
        <Modifier>
          <Name value="modifier_EC9E2BA6_Phone" />
          <ShowAsChanges value="True" />
          <SourcePath value="model.msg.ResponsiblePerson.ResponsiblePersonEvent.Phone" />
          <Validators>
            <Validator Name="prefix">
              <ErrorMessage IsValid="True">
                <ExpressionText><![CDATA["Telefonní čísla musí mít validní znak telefonního prefixu. (Jedná se o znak: \"+\" ) "]]></ExpressionText>
                <ResultType>
                  <BaseType value="String" />
                </ResultType>
              </ErrorMessage>
              <IsValid IsValid="True">
                <ExpressionText><![CDATA[attr.isEmpty() ? true :
packages.utils.functions.startsWith(attr, "+")]]></ExpressionText>
                <ResultType>
                  <BaseType value="Bool" />
                </ResultType>
              </IsValid>
            </Validator>
          </Validators>
        </Modifier>
        <Modifier>
          <Name value="modifier_80A29612_CellPhone" />
          <ShowAsChanges value="True" />
          <SourcePath value="model.msg.ResponsiblePerson.ResponsiblePersonEvent.CellPhone" />
          <Validators>
            <Validator Name="prefix">
              <ErrorMessage IsValid="True">
                <ExpressionText><![CDATA["Telefonní čísla musí mít validní znak telefonního prefixu. (Jedná se o znak: \"+\" ) "]]></ExpressionText>
                <ResultType>
                  <BaseType value="String" />
                </ResultType>
              </ErrorMessage>
              <IsValid IsValid="True">
                <ExpressionText><![CDATA[attr.isEmpty() ? true :
packages.utils.functions.startsWith(attr, "+")]]></ExpressionText>
                <ResultType>
                  <BaseType value="Bool" />
                </ResultType>
              </IsValid>
            </Validator>
          </Validators>
        </Modifier>
        <Modifier>
          <Name value="modifier_C702BD1E_EMail" />
          <ShowAsChanges value="True" />
          <SourcePath value="model.msg.ResponsiblePerson.ResponsiblePersonEvent.EMail" />
          <Validators>
            <Validator Name="email">
              <ErrorMessage IsValid="True">
                <ExpressionText><![CDATA["Email musí mít validní formát"]]></ExpressionText>
                <ResultType>
                  <BaseType value="String" />
                </ResultType>
              </ErrorMessage>
              <IsValid IsValid="True">
                <ExpressionText><![CDATA[attr.isEmpty() ? true :
ValidateAgainstRegularExpression(attr, "^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:.[a-zA-Z0-9-]+)*$")]]></ExpressionText>
                <ResultType>
                  <BaseType value="Bool" />
                </ResultType>
              </IsValid>
            </Validator>
          </Validators>
        </Modifier>
      </Modifiers>
    </DataContext>
  </DataContext>
  <OnCreate>
    <ActionEvent ReferencedAction="~init" />
  </OnCreate>
  <Actions>
    <ActionBlock>
      <Name value="handler_button_close_OnClick" />
      <IsPrivate value="True" />
      <ActionLangBody IsValid="True">
        <Script><![CDATA[navigation.main.lists.go()]]></Script>
      </ActionLangBody>
      <DataContext>
        <ActionDataContext />
      </DataContext>
    </ActionBlock>
    <ActionBlock>
      <Name value="init" />
      <ActionLangBody IsValid="True">
        <Script><![CDATA[var master = globals.forms.master
var model = form.model
var msg = model.msg
var person = msg.ResponsiblePerson
var event = person.ResponsiblePersonEvent

// # copy global parameters and clear them up
var gp = globals.forms.Person.params
var p = form.params
p.fromJson(gp.toJson())
gp.clear()

// # navigation tree
master.isNavigationTreeVisible = false
ntc.resetFinishedSetup()
master.isNavigationTreeVisible = true

ntc.beginSetup("navTrees::_ntPerson", defaultString())

var all = ntc.addNode("All", "Vše")
var detail = ntc.addNode("Detail", "Informace o osobě")
var files = ntc.addNode("Check", "Prověření osoby")

ntc.finishSetup()

ntc.focusNode("All")

// #nacteni dat

form.action = enums.ActionPerson.NONE
if p.Mode = "VIEW" then
	if hasValue(p.Guid) then
		form.actions.loadData(p.Guid)		
	else
		system.consoleError("Missing parameter Guid")
	endif
else if p.Mode = "NEW" then
	var dt = getDateTime()
	form.action = enums.ActionPerson.New
	
	person.GUID = newGuid()
	event.RecordingCustomsOffice = globals.user.CuCode
	event.RecordingPerson = globals.user.userName
	event.RecordingPersonName = globals.user.fullName
	event.ValidityStartDate = dt
else
	system.consoleError("Invalid value of parameter Mode: " + p.Mode)	
endif endif
]]></Script>
      </ActionLangBody>
      <DataContext>
        <ActionDataContext />
      </DataContext>
    </ActionBlock>
    <ActionBlock>
      <Name value="loadData" />
      <ActionLangBody IsValid="True">
        <Script><![CDATA[request.ResponsiblePerson.GUID = guid
request.ResponsiblePerson.GUIDEvent = eventGuid

form.actions.sendRequest("ASEOPersonDataRequestEx", request.toJson(), "ASEOPersonDataResponseEx")

if globals.sendResult.Valid then
	var sr = globals.sendResult
	
	var msg = form.model.msg
	
    msg.clear()
    msg.fromJson(sr.Message)
    
	// oznaci spravny radek v tabulce verzi
	var selectedEvent = msg.ResponsiblePerson.ResponsiblePersonHistory.selectFirst(Current.SelectedEvent)
	if selectedEvent.hasValue() then
		form.ui.tables.stVersions.Index = selectedEvent.index()
	endif
	
	form.action = enums.ActionPerson.NONE
else
    apiobjects.notificationsCtrl.addError("Data osoby nebyla načtena.")
endif]]></Script>
      </ActionLangBody>
      <DataContext>
        <ActionDataContext>
          <Children>
            <Attribute>
              <Name value="guid" />
              <Caption value="Guid" />
              <DataContextParameter.IsInput value="True" />
              <DataContextParameter.IsInputRequired value="True" />
              <DeclaredType>
                <AttributeType />
              </DeclaredType>
            </Attribute>
            <Attribute>
              <Name value="eventGuid" />
              <Caption value="Event guid" />
              <DataContextParameter.IsInput value="True" />
              <DeclaredType>
                <AttributeType />
              </DeclaredType>
            </Attribute>
            <Complex>
              <Name value="request" />
              <Caption value="Request" />
              <Children>
                <Include>
                  <Include reference="+DataEntities.ASEOPersonDataRequestEx" />
                </Include>
              </Children>
            </Complex>
          </Children>
        </ActionDataContext>
      </DataContext>
    </ActionBlock>
    <ActionBlock>
      <Name value="sendRequest" />
      <ActionLangBody IsValid="True">
        <Script><![CDATA[// prepare error in case we need it
var err = globals.forms.error.params
err.Caption = "Error sending " + request

// clear send result
globals.sendResult.clear()

globals.IsBusy = true
var response = apiobjects.cic.postAsync(request, requestData)
globals.IsBusy = false

var type = response.getMessageType()
if type in [expectedResponse] then
	globals.sendResult.Valid = true
	globals.sendResult.Type = type
	globals.sendResult.Message = response.getJsonString()
else if type in ["IN906A"] then
	err.MsgType = type
	err.Msg = response.getJsonString()
	system.consoleError(err.MsgType)
	system.consoleError(err.Msg)
	navigation.main.error.goAndBack()
else if response.isError() then
	err.Message = response.getErrorMessage()
	system.consoleError(err.Message)
	navigation.main.error.goAndBack()
else
	err.Message = "Unexpected response message type: " + type
	system.consoleError(err.Message)
	navigation.main.error.goAndBack()
endif endif endif
]]></Script>
      </ActionLangBody>
      <DataContext>
        <ActionDataContext>
          <Children>
            <Attribute>
              <Name value="request" />
              <Caption value="Request" />
              <DataContextParameter.IsInput value="True" />
              <DataContextParameter.IsInputRequired value="True" />
              <DeclaredType>
                <AttributeType />
              </DeclaredType>
            </Attribute>
            <Attribute>
              <Name value="requestData" />
              <Caption value="Request data" />
              <DataContextParameter.IsInput value="True" />
              <DataContextParameter.IsInputRequired value="True" />
              <DeclaredType>
                <AttributeType />
              </DeclaredType>
            </Attribute>
            <Attribute>
              <Name value="expectedResponse" />
              <Caption value="Expected response" />
              <DataContextParameter.IsInput value="True" />
              <DataContextParameter.IsInputRequired value="True" />
              <DeclaredType>
                <AttributeType />
              </DeclaredType>
            </Attribute>
          </Children>
        </ActionDataContext>
      </DataContext>
    </ActionBlock>
    <ActionBlock>
      <Name value="handler_eventDispatcher_OnMessage" />
      <IsPrivate value="True" />
      <ActionLangBody IsValid="True">
        <Script><![CDATA[var model = form.model
var ui = form.ui
var navTree = ui.navTree

if params.source = "main_master_navTree" then
	if params.type = "onNodeActivated" then
		var ev = model.onNodeActivated 
		ev.fromJson(params.data)
	
		navTree.selectedNode = ev.id
		
		system.console(model.onNodeActivated.toJson())
	else
		system.consoleError("Invalid event type " + params.type)
	endif
else if params.source = "main_master_codelistGroup"	then
	if params.type = "onBackgroundLoadingFinished" then
		// not necessary on this form, implement if that changes
		//form.actions.onBackgroundLoadingFinished()
	else
		system.consoleError("Invalid event type " + params.type)
	endif	
endif endif]]></Script>
      </ActionLangBody>
      <DataContext>
        <ActionDataContext />
      </DataContext>
    </ActionBlock>
    <ActionBlock>
      <Name value="handler_stVersions_OnRowClick" />
      <IsPrivate value="True" />
      <ActionLangBody IsValid="True">
        <Script><![CDATA[if isTrue(form.action <> enums.ActionPerson.NONE) then
	notificationsCtrl.addInfo("Při editaci se nelze přepnout na historickou verzi")
endif]]></Script>
      </ActionLangBody>
      <DataContext>
        <ActionDataContext />
      </DataContext>
    </ActionBlock>
    <ActionBlock>
      <Name value="handler_Index_OnUserChange" />
      <Description value="stVersions" />
      <IsPrivate value="True" />
      <ActionLangBody IsValid="True">
        <Script><![CDATA[var index = params.data.Index
var history = form.model.msg.ResponsiblePerson.ResponsiblePersonHistory
var selectedEvent = history.selectFirst(Current.index() = index)

if selectedEvent.hasValue() then
	var eventGuid = selectedEvent.GUID
	
	globals.IsBusy = True
	form.actions.loadData(form.params.GUID, eventGuid)
	globals.IsBusy = False
endif]]></Script>
      </ActionLangBody>
      <DataContext>
        <ActionDataContext />
      </DataContext>
    </ActionBlock>
    <ActionBlock>
      <Name value="handler_buttonActionCancel_OnClick" />
      <IsPrivate value="True" />
      <ActionLangBody IsValid="True">
        <Script><![CDATA[form.actions.loadData(form.params.GUID)]]></Script>
      </ActionLangBody>
      <DataContext>
        <ActionDataContext />
      </DataContext>
    </ActionBlock>
    <ActionBlock>
      <Name value="handler_btnActionValidation_OnClick" />
      <IsPrivate value="True" />
      <ActionLangBody IsValid="True">
        <Script><![CDATA[var msg = form.model.msg

if not msg.isValid() then
	msg.setTouched(true)
	form.ui.groupBoxes.cgbClientErrors._IsVisible = true
endif]]></Script>
      </ActionLangBody>
      <DataContext>
        <ActionDataContext />
      </DataContext>
    </ActionBlock>
    <ActionBlock>
      <Name value="handler_btnModify_OnClick" />
      <IsPrivate value="True" />
      <ActionLangBody IsValid="True">
        <Script><![CDATA[var msg = form.model.msg
var event = msg.ResponsiblePerson.ResponsiblePersonEvent
var dt = getDateTime()

form.action = enums.ActionPerson.Modify

event.RecordingCustomsOffice = globals.user.CuCode
event.RecordingPerson = globals.user.userName
event.RecordingPersonName = globals.user.fullName
event.ValidityStartDate = dt



]]></Script>
      </ActionLangBody>
      <DataContext>
        <ActionDataContext />
      </DataContext>
    </ActionBlock>
    <ActionBlock>
      <Name value="getValidityStartDate" />
      <Description value="returns current event ValidityStartDate or current dateTime" />
      <ActionLangBody IsValid="True">
        <Script><![CDATA[var event = form.model.msg.ResponsiblePerson.ResponsiblePersonEvent

result = getDateTime()
if hasValue(event.ValidityStartDate) then
	result = event.ValidityStartDate
endif]]></Script>
      </ActionLangBody>
      <DataContext>
        <ActionDataContext>
          <Children>
            <Attribute>
              <Name value="result" />
              <Caption value="Result" />
              <DataContextParameter.IsResult value="True" />
              <DeclaredType>
                <AttributeType>
                  <BaseType value="DateTime" />
                </AttributeType>
              </DeclaredType>
            </Attribute>
          </Children>
        </ActionDataContext>
      </DataContext>
    </ActionBlock>
    <ActionBlock>
      <Name value="setFilters" />
      <ActionLangBody IsValid="True">
        <Script><![CDATA[var dt = form.actions.getValidityStartDate()

var filter = cbb_Nationality_FltCodelist.resetFilter(false)
filter.filterByValidityDateTime(dt)
filter.commit()
]]></Script>
      </ActionLangBody>
      <DataContext>
        <ActionDataContext />
      </DataContext>
    </ActionBlock>
    <ActionBlock>
      <Name value="handler_btnActionConfirm_OnClick" />
      <IsPrivate value="True" />
      <ActionLangBody IsValid="True">
        <Script><![CDATA[var msg = form.model.msg
var action = form.action
var notification = defaultString()

if msg.isValid() then
	if action = enums.ActionPerson.New then
		form.actions.sendRequest("ASEOPersonCreate", msg.toJson(), "CM002A")
		notification = "Osoba byla uložena"
	else if action = enums.ActionPerson.Modify then
		form.actions.sendRequest("ASEOPersonModification", msg.toJson(), "CM002A")
		notification = "Osoba byla modifikována"
	else if action = enums.ActionPerson.Delete then
		msgDelete.GUID = msg.ResponsiblePerson.GUID
		form.actions.sendRequest("ASEOPersonDelete", msgDelete.toJson(), "CM002A")
		notification = "Osoba byla zrušena"
	else
		system.consoleError(stringFormat("Invalid action: {0}", action.enumCaption()))
	endif endif endif
	
	if globals.sendResult.Valid and hasValue(notification) then
		apiobjects.notificationsCtrl.addSuccess(notification)
		navigation.main.lists.go()
	endif	
else
	msg.setTouched(true)
	form.ui.groupBoxes.cgbClientErrors._IsVisible = true
endif]]></Script>
      </ActionLangBody>
      <DataContext>
        <ActionDataContext>
          <Children>
            <Complex>
              <Name value="msgDelete" />
              <Caption value="Msg delete" />
              <Children>
                <Include>
                  <Include reference="+DataEntities.ASEOPLDelete" />
                </Include>
              </Children>
            </Complex>
          </Children>
        </ActionDataContext>
      </DataContext>
    </ActionBlock>
    <ActionBlock>
      <Name value="handler_clientValidationSummary_OnItemClick" />
      <IsPrivate value="True" />
      <ActionLangBody IsValid="True">
        <Script><![CDATA[var ctr = params.errorSourceComponent
var node = params.navigationTreeNode
var ptr = params.pointer

if hasValue(node) then
	ntc.focusNode(node)
else
	ntc.focusNode("All")
endif

/*
var strings = globals.strings
strings.clear()
var split = actions.js_split(ptr, "/")
strings.fromJson(split)

foreach s in strings do
	var part = s.str
	var idx = indexOf(part, "[")
	
	if idx > 0 then
		var col = substring(part, 1, idx - 1)
		var num = toInt(substring(part, idx + 1, length(part) - length(col) - 2), 0)
		
		form.actions.SwitchToIndex(col, num)
	endif
endfor
*/

// to focus correct control
pageAPI.focusControl(ctr, defaultString())

// to focus correct control in case it is in Repeater
pageAPI.focusControl(ctr, ptr)

system.console("Clicked on: " + ptr)]]></Script>
      </ActionLangBody>
      <DataContext>
        <ActionDataContext />
      </DataContext>
    </ActionBlock>
    <ActionBlock>
      <Name value="handler_btnDelete_OnClick" />
      <IsPrivate value="True" />
      <ActionLangBody IsValid="True">
        <Script><![CDATA[form.action = enums.ActionPerson.Delete]]></Script>
      </ActionLangBody>
      <DataContext>
        <ActionDataContext />
      </DataContext>
    </ActionBlock>
    <ActionBlock>
      <Name value="handler_modifier_EAC70038_ValidityStartDate_OnChange" />
      <IsPrivate value="True" />
      <ActionLangBody IsValid="True">
        <Script><![CDATA[form.actions.setFilters()]]></Script>
      </ActionLangBody>
      <DataContext>
        <ActionDataContext />
      </DataContext>
    </ActionBlock>
  </Actions>
  <ApiObjects>
    <FilteredCodelist identity="Codelist.2fd2d7af4a6d445bad8a58610632f8e0">
      <Name value="cbb_Nationality_FltCodelist" />
      <codelistSource reference="/(codeLists.2e35af8e5b484554915da40c527c1148)+GlobalApiObjects.ZEME" />
    </FilteredCodelist>
    <EventDispatcher identity="EventDispatcher.eb764ceb30274f1e9a3d051d512d6b26">
      <Name value="eventDispatcher" />
      <OnMessage>
        <ActionEvent ReferencedAction="~handler_eventDispatcher_OnMessage" />
      </OnMessage>
    </EventDispatcher>
    <ErrorPointerMap identity="ErrorPointerMap.69320151074d4125908af3869d7556e1">
      <Name value="epm" />
    </ErrorPointerMap>
  </ApiObjects>
</Form>